"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[983],{98983:(e,t,n)=>{n.r(t),n.d(t,{MembersModule:()=>Yn});var i=n(65017),o=n(98645),s=n(54019),r=n(92716),a=n(84598),c=n(30359),l=n(33031),u=n(68362),d=n(58691),p=n(67013),g=n(37648),m=n(20698),h=n(15015),U=n(21021),f=n(14309);function Z(e){return""!==e.value&&e.value&&void 0!==e.value.split(",").map((e=>o.kI.email({value:e.trim()}))).find((e=>null!==e))?{multipleEmails:{message:"multipleInputEmails"}}:null}var _=n(24852),b=n(31131),w=n(32100),v=n(80361),A=n(19419),x=n(33245),y=n(98205),T=n(46246),C=n(36338),q=n(66385),k=n(81974),S=n(7172),I=n(29465),P=n(24637),M=n(11512),N=n(75734),L=n(36179),J=n(44358),z=n(21656),O=n(17731),R=n(26536),G=n(36689),Q=n(85339),Y=n(17404);function j(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"div",6),_._uU(1,"\n        "),_.TgZ(2,"input",7),_.NdJ("change",(function(){_.CHM(e);const t=_.oxw(2);return _.KtG(t.onChildCheck())})),_.qZA(),_._uU(3,"\n        "),_.TgZ(4,"label",2),_._uU(5),_.ALo(6,"i18n"),_.qZA(),_._uU(7,"\n      "),_.qZA()}if(2&e){const e=_.oxw().$implicit,t=_.oxw();_.xp6(2),_.Q6J("name",t.pascalize(e.key))("id",e.key)("formControl",e.value),_.xp6(2),_.Q6J("for",e.key),_.xp6(1),_.hij("\n          ",_.lcZ(6,5,e.key),"\n        ")}}function E(e,t){if(1&e&&(_.ynx(0),_._uU(1,"\n      "),_.YNc(2,j,8,7,"div",5),_._uU(3,"\n    "),_.BQk()),2&e){const e=t.$implicit,n=_.oxw();_.xp6(2),_.Q6J("ngIf",e.key!=n.parentId)}}class B{constructor(){this.destroy$=new s.x,this.onSavedUser=new _.vpe,this.onDeletedUser=new _.vpe}get parentIndeterminate(){return this.children.some((([e,t])=>1==t.value))&&!this.children.every((([e,t])=>1==t.value))}ngOnInit(){this.checkboxes.controls[this.parentId].valueChanges.pipe((0,u.R)(this.destroy$)).subscribe((e=>{Object.values(this.checkboxes.controls).forEach((t=>t.setValue(e,{emitEvent:!1})))}))}get parentCheckbox(){return this.checkboxes.controls[this.parentId]}get children(){return Object.entries(this.checkboxes.controls).filter((([e,t])=>e!=this.parentId))}onChildCheck(){const e=this.children.every((([e,t])=>1==t.value));this.parentCheckbox.setValue(e,{emitEvent:!1})}key(e,t){return t.key}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}pascalize(e){return Q.c.camelToPascalCase(e)}}B.ɵfac=function(e){return new(e||B)},B.ɵcmp=_.Xpm({type:B,selectors:[["app-nested-checkbox"]],inputs:{parentId:"parentId",checkboxes:"checkboxes"},outputs:{onSavedUser:"onSavedUser",onDeletedUser:"onDeletedUser"},decls:15,vars:13,consts:[[3,"formGroup"],["type","checkbox",3,"name","id","formControlName","indeterminate"],[1,"!tw-font-normal",3,"for"],[1,"tw-ml-6"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","",4,"ngIf"],[1,""],["type","checkbox",1,"",3,"name","id","formControl","change"]],template:function(e,t){1&e&&(_.TgZ(0,"div",0),_._uU(1,"\n  "),_._UZ(2,"input",1),_._uU(3,"\n  "),_.TgZ(4,"label",2),_._uU(5),_.ALo(6,"i18n"),_.qZA(),_._uU(7,"\n  "),_.TgZ(8,"div",3),_._uU(9,"\n    "),_.YNc(10,E,4,1,"ng-container",4),_.ALo(11,"keyvalue"),_._uU(12,"\n  "),_.qZA(),_._uU(13,"\n"),_.qZA(),_._uU(14,"\n")),2&e&&(_.Q6J("formGroup",t.checkboxes),_.xp6(2),_.Q6J("name",t.pascalize(t.parentId))("id",t.parentId)("formControlName",t.parentId)("indeterminate",t.parentIndeterminate),_.xp6(2),_.Q6J("for",t.parentId),_.xp6(1),_.hij("\n    ",_.lcZ(6,9,t.parentId),"\n  "),_.xp6(5),_.Q6J("ngForOf",_.lcZ(11,11,t.checkboxes.controls))("ngForTrackBy",t.key))},dependencies:[A.sg,A.O5,o.Wl,o.JJ,o.JL,o.oH,o.sg,o.u,A.Nd,Y.C],encapsulation:2});var D,$,F=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};function K(e,t){if(1&e&&(_.TgZ(0,"span",14),_._uU(1),_.qZA()),2&e){const e=_.oxw();_.xp6(1),_.Oqu(e.params.name)}}function H(e,t){1&e&&(_.TgZ(0,"span",15),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e&&(_.xp6(1),_.Oqu(_.lcZ(2,1,"revoked")))}function W(e,t){1&e&&(_.ynx(0),_._uU(1,"\n        "),_._UZ(2,"i",16),_.ALo(3,"i18n"),_._uU(4,"\n        "),_.TgZ(5,"span",17),_._uU(6),_.ALo(7,"i18n"),_.qZA(),_._uU(8,"\n      "),_.BQk()),2&e&&(_.xp6(2),_.s9C("title",_.lcZ(3,2,"loading")),_.xp6(4),_.Oqu(_.lcZ(7,4,"loading")))}function V(e,t){1&e&&(_.ynx(0),_._uU(1,"\n            "),_.TgZ(2,"p"),_._uU(3),_.ALo(4,"i18n"),_.qZA(),_._uU(5,"\n            "),_.TgZ(6,"bit-form-field"),_._uU(7,"\n              "),_.TgZ(8,"bit-label"),_._uU(9),_.ALo(10,"i18n"),_.qZA(),_._uU(11,"\n              "),_._UZ(12,"input",46),_._uU(13,"\n              "),_.TgZ(14,"bit-hint"),_._uU(15),_.ALo(16,"i18n"),_.qZA(),_._uU(17,"\n            "),_.qZA(),_._uU(18,"\n          "),_.BQk()),2&e&&(_.xp6(3),_.Oqu(_.lcZ(4,3,"inviteUserDesc")),_.xp6(6),_.Oqu(_.lcZ(10,5,"email")),_.xp6(6),_.Oqu(_.xi3(16,7,"inviteMultipleEmailDesc","20")))}function X(e,t){1&e&&(_.ynx(0),_._uU(1,"\n                  "),_.TgZ(2,"div",27),_._uU(3),_.ALo(4,"i18n"),_.TgZ(5,"a",47),_._uU(6),_.ALo(7,"i18n"),_.qZA(),_._uU(8),_.ALo(9,"i18n"),_.qZA(),_._uU(10,"\n                "),_.BQk()),2&e&&(_.xp6(3),_.hij("\n                    ",_.lcZ(4,3,"customDescNonEnterpriseStart"),""),_.xp6(3),_.Oqu(_.lcZ(7,5,"customDescNonEnterpriseLink")),_.xp6(2),_.hij("",_.lcZ(9,7,"customDescNonEnterpriseEnd"),"\n                  "))}function ee(e,t){1&e&&(_._uU(0,"\n                  "),_.TgZ(1,"div",27),_._uU(2),_.ALo(3,"i18n"),_.qZA(),_._uU(4,"\n                ")),2&e&&(_.xp6(2),_.hij("\n                    ",_.lcZ(3,1,"customDesc"),"\n                  "))}function te(e,t){if(1&e){const e=_.EpF();_.ynx(0),_._uU(1,"\n            "),_.TgZ(2,"h3",48),_._uU(3),_.ALo(4,"i18n"),_.qZA(),_._uU(5,"\n            "),_.TgZ(6,"div",49),_._uU(7,"\n              "),_.TgZ(8,"div",50),_._uU(9,"\n                "),_.TgZ(10,"div",51),_._uU(11,"\n                  "),_.TgZ(12,"label",52),_._uU(13),_.ALo(14,"i18n"),_.qZA(),_._uU(15,"\n                  "),_._UZ(16,"hr",53),_._uU(17,"\n                  "),_.TgZ(18,"app-nested-checkbox",54),_._uU(19,"\n                  "),_.qZA(),_._uU(20,"\n                "),_.qZA(),_._uU(21,"\n              "),_.qZA(),_._uU(22,"\n              "),_.TgZ(23,"div",50),_._uU(24,"\n                "),_.TgZ(25,"div",51),_._uU(26,"\n                  "),_.TgZ(27,"label",52),_._uU(28),_.ALo(29,"i18n"),_.qZA(),_._uU(30,"\n                  "),_._UZ(31,"hr",53),_._uU(32,"\n                  "),_.TgZ(33,"div"),_._uU(34,"\n                    "),_._UZ(35,"input",55),_._uU(36,"\n                    "),_.TgZ(37,"label",56),_._uU(38),_.ALo(39,"i18n"),_.qZA(),_._uU(40,"\n                  "),_.qZA(),_._uU(41,"\n                  "),_.TgZ(42,"div"),_._uU(43,"\n                    "),_._UZ(44,"input",57),_._uU(45,"\n                    "),_.TgZ(46,"label",58),_._uU(47),_.ALo(48,"i18n"),_.qZA(),_._uU(49,"\n                  "),_.qZA(),_._uU(50,"\n                  "),_.TgZ(51,"div"),_._uU(52,"\n                    "),_._UZ(53,"input",59),_._uU(54,"\n                    "),_.TgZ(55,"label",60),_._uU(56),_.ALo(57,"i18n"),_.qZA(),_._uU(58,"\n                  "),_.qZA(),_._uU(59,"\n                  "),_.TgZ(60,"app-nested-checkbox",61),_._uU(61,"\n                  "),_.qZA(),_._uU(62,"\n                  "),_.TgZ(63,"div"),_._uU(64,"\n                    "),_._UZ(65,"input",62),_._uU(66,"\n                    "),_.TgZ(67,"label",63),_._uU(68),_.ALo(69,"i18n"),_.qZA(),_._uU(70,"\n                  "),_.qZA(),_._uU(71,"\n                  "),_.TgZ(72,"div"),_._uU(73,"\n                    "),_._UZ(74,"input",64),_._uU(75,"\n                    "),_.TgZ(76,"label",65),_._uU(77),_.ALo(78,"i18n"),_.qZA(),_._uU(79,"\n                  "),_.qZA(),_._uU(80,"\n                  "),_.TgZ(81,"div"),_._uU(82,"\n                    "),_._UZ(83,"input",66),_._uU(84,"\n                    "),_.TgZ(85,"label",67),_._uU(86),_.ALo(87,"i18n"),_.qZA(),_._uU(88,"\n                  "),_.qZA(),_._uU(89,"\n                  "),_.TgZ(90,"div"),_._uU(91,"\n                    "),_.TgZ(92,"input",68),_.NdJ("change",(function(){_.CHM(e);const t=_.oxw(2);return _.KtG(t.handleDependentPermissions())})),_.qZA(),_._uU(93,"\n                    "),_.TgZ(94,"label",69),_._uU(95),_.ALo(96,"i18n"),_.qZA(),_._uU(97,"\n                  "),_.qZA(),_._uU(98,"\n                  "),_.TgZ(99,"div"),_._uU(100,"\n                    "),_.TgZ(101,"input",70),_.NdJ("change",(function(){_.CHM(e);const t=_.oxw(2);return _.KtG(t.handleDependentPermissions())})),_.qZA(),_._uU(102,"\n                    "),_.TgZ(103,"label",71),_._uU(104),_.ALo(105,"i18n"),_.qZA(),_._uU(106,"\n                  "),_.qZA(),_._uU(107,"\n                "),_.qZA(),_._uU(108,"\n              "),_.qZA(),_._uU(109,"\n            "),_.qZA(),_._uU(110,"\n          "),_.BQk()}if(2&e){const e=_.oxw(2);_.xp6(3),_.hij("\n              ",_.lcZ(4,14,"permissions"),"\n            "),_.xp6(3),_.Q6J("formGroup",e.permissionsGroup),_.xp6(7),_.Oqu(_.lcZ(14,16,"managerPermissions")),_.xp6(5),_.Q6J("checkboxes",e.permissionsGroup.controls.manageAssignedCollectionsGroup),_.xp6(10),_.Oqu(_.lcZ(29,18,"adminPermissions")),_.xp6(10),_.hij("\n                      ",_.lcZ(39,20,"accessEventLogs"),"\n                    "),_.xp6(9),_.hij("\n                      ",_.lcZ(48,22,"accessImportExport"),"\n                    "),_.xp6(9),_.hij("\n                      ",_.lcZ(57,24,"accessReports"),"\n                    "),_.xp6(4),_.Q6J("checkboxes",e.permissionsGroup.controls.manageAllCollectionsGroup),_.xp6(8),_.hij("\n                      ",_.lcZ(69,26,"manageGroups"),"\n                    "),_.xp6(9),_.hij("\n                      ",_.lcZ(78,28,"manageSso"),"\n                    "),_.xp6(9),_.hij("\n                      ",_.lcZ(87,30,"managePolicies"),"\n                    "),_.xp6(9),_.hij("\n                      ",_.lcZ(96,32,"manageUsers"),"\n                    "),_.xp6(9),_.hij("\n                      ",_.lcZ(105,34,"manageResetPassword"),"\n                    ")}}function ne(e,t){1&e&&(_.ynx(0),_._uU(1,"\n            "),_.TgZ(2,"h3",72),_._uU(3),_.ALo(4,"i18n"),_.TgZ(5,"a",73),_.ALo(6,"i18n"),_._uU(7,"\n                "),_._UZ(8,"i",23),_._uU(9,"\n              "),_.qZA(),_._uU(10,"\n            "),_.qZA(),_._uU(11,"\n            "),_.TgZ(12,"p",74),_._uU(13),_.ALo(14,"i18n"),_.qZA(),_._uU(15,"\n            "),_.TgZ(16,"bit-form-control"),_._uU(17,"\n              "),_._UZ(18,"input",75),_._uU(19,"\n              "),_.TgZ(20,"bit-label"),_._uU(21),_.ALo(22,"i18n"),_.qZA(),_._uU(23,"\n            "),_.qZA(),_._uU(24,"\n          "),_.BQk()),2&e&&(_.xp6(3),_.hij("\n              ",_.lcZ(4,4,"secretsManagerBeta"),"\n              "),_.xp6(2),_.s9C("appA11yTitle",_.lcZ(6,6,"learnMore")),_.xp6(8),_.Oqu(_.lcZ(14,8,"secretsManagerBetaDesc")),_.xp6(8),_.hij("\n                ",_.lcZ(22,10,"userAccessSecretsManager"),"\n              "))}function ie(e,t){if(1&e&&(_.TgZ(0,"bit-tab",19),_.ALo(1,"i18n"),_._uU(2,"\n          "),_.TgZ(3,"div",42),_._uU(4),_.ALo(5,"i18n"),_.qZA(),_._uU(6,"\n          "),_._UZ(7,"bit-access-selector",76),_.ALo(8,"i18n"),_.ALo(9,"i18n"),_.ALo(10,"i18n"),_._uU(11,"\n        "),_.qZA()),2&e){const e=_.oxw(2);_.Q6J("label",_.lcZ(1,6,"groups")),_.xp6(4),_.hij("\n            ",_.lcZ(5,8,"groupAccessUserDesc"),"\n          "),_.xp6(3),_.Q6J("items",e.groupAccessItems)("columnHeader",_.lcZ(8,10,"groups"))("selectorLabelText",_.lcZ(9,12,"selectGroups"))("emptySelectionText",_.lcZ(10,14,"noGroupsAdded"))}}function oe(e,t){1&e&&(_.TgZ(0,"div",42),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e&&(_.xp6(1),_.hij("\n            ",_.lcZ(2,1,"userPermissionOverrideHelper"),"\n          "))}function se(e,t){if(1&e&&(_._UZ(0,"bit-access-selector",77),_.ALo(1,"i18n"),_.ALo(2,"i18n"),_.ALo(3,"i18n")),2&e){const e=_.oxw(2);_.Q6J("permissionMode",e.PermissionMode.Edit)("showGroupColumn",e.organization.useGroups)("items",e.collectionAccessItems)("columnHeader",_.lcZ(1,6,"collection"))("selectorLabelText",_.lcZ(2,8,"selectCollections"))("emptySelectionText",_.lcZ(3,10,"noCollectionsAdded"))}}function re(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"bit-tab-group",18),_.NdJ("selectedIndexChange",(function(t){_.CHM(e);const n=_.oxw();return _.KtG(n.tabIndex=t)})),_._uU(1,"\n        "),_.TgZ(2,"bit-tab",19),_.ALo(3,"i18n"),_._uU(4,"\n          "),_.YNc(5,V,19,10,"ng-container",6),_._uU(6,"\n          "),_.TgZ(7,"fieldset",20),_._uU(8,"\n            "),_.TgZ(9,"legend",21),_._uU(10),_.ALo(11,"i18n"),_.TgZ(12,"a",22),_.ALo(13,"i18n"),_._uU(14,"\n                "),_._UZ(15,"i",23),_._uU(16,"\n              "),_.qZA(),_._uU(17,"\n            "),_.qZA(),_._uU(18,"\n            "),_.TgZ(19,"div",24),_._uU(20,"\n              "),_._UZ(21,"input",25),_._uU(22,"\n              "),_.TgZ(23,"label",26),_._uU(24),_.ALo(25,"i18n"),_.TgZ(26,"div",27),_._uU(27),_.ALo(28,"i18n"),_.qZA(),_._uU(29,"\n              "),_.qZA(),_._uU(30,"\n            "),_.qZA(),_._uU(31,"\n            "),_.TgZ(32,"div",24),_._uU(33,"\n              "),_._UZ(34,"input",28),_._uU(35,"\n              "),_.TgZ(36,"label",29),_._uU(37),_.ALo(38,"i18n"),_.TgZ(39,"div",27),_._uU(40),_.ALo(41,"i18n"),_.qZA(),_._uU(42,"\n              "),_.qZA(),_._uU(43,"\n            "),_.qZA(),_._uU(44,"\n            "),_.TgZ(45,"div",24),_._uU(46,"\n              "),_._UZ(47,"input",30),_._uU(48,"\n              "),_.TgZ(49,"label",31),_._uU(50),_.ALo(51,"i18n"),_.TgZ(52,"div",27),_._uU(53),_.ALo(54,"i18n"),_.qZA(),_._uU(55,"\n              "),_.qZA(),_._uU(56,"\n            "),_.qZA(),_._uU(57,"\n            "),_.TgZ(58,"div",24),_._uU(59,"\n              "),_._UZ(60,"input",32),_._uU(61,"\n              "),_.TgZ(62,"label",33),_._uU(63),_.ALo(64,"i18n"),_.TgZ(65,"div",27),_._uU(66),_.ALo(67,"i18n"),_.qZA(),_._uU(68,"\n              "),_.qZA(),_._uU(69,"\n            "),_.qZA(),_._uU(70,"\n            "),_.TgZ(71,"div",34),_._uU(72,"\n              "),_._UZ(73,"input",35),_._uU(74,"\n              "),_.TgZ(75,"label",36),_._uU(76),_.ALo(77,"i18n"),_.YNc(78,X,11,9,"ng-container",37),_._uU(79,"\n                "),_.YNc(80,ee,5,3,"ng-template",null,38,_.W1O),_._uU(82,"\n              "),_.qZA(),_._uU(83,"\n            "),_.qZA(),_._uU(84,"\n          "),_.qZA(),_._uU(85,"\n          "),_.YNc(86,te,111,36,"ng-container",6),_._uU(87,"\n          "),_.YNc(88,ne,25,12,"ng-container",6),_._uU(89,"\n          "),_.TgZ(90,"bit-form-field"),_._uU(91,"\n            "),_.TgZ(92,"bit-label"),_._uU(93),_.ALo(94,"i18n"),_.qZA(),_._uU(95,"\n            "),_._UZ(96,"input",39),_._uU(97,"\n            "),_.TgZ(98,"bit-hint"),_._uU(99),_.ALo(100,"i18n"),_.qZA(),_._uU(101,"\n          "),_.qZA(),_._uU(102,"\n        "),_.qZA(),_._uU(103,"\n        "),_.YNc(104,ie,12,16,"bit-tab",40),_._uU(105,"\n        "),_.TgZ(106,"bit-tab",19),_.ALo(107,"i18n"),_._uU(108,"\n          "),_.YNc(109,oe,3,3,"div",41),_._uU(110,"\n          "),_.TgZ(111,"div",42),_._uU(112,"\n            "),_.TgZ(113,"bit-form-control"),_._uU(114,"\n              "),_._UZ(115,"input",43),_._uU(116,"\n              "),_.TgZ(117,"bit-label"),_._uU(118),_.ALo(119,"i18n"),_.TgZ(120,"a",44),_.ALo(121,"i18n"),_._uU(122,"\n                  "),_._UZ(123,"i",23),_._uU(124,"\n                "),_.qZA(),_._uU(125,"\n              "),_.qZA(),_._uU(126,"\n              "),_.TgZ(127,"bit-hint"),_._uU(128),_.ALo(129,"i18n"),_.qZA(),_._uU(130,"\n            "),_.qZA(),_._uU(131,"\n          "),_.qZA(),_._uU(132,"\n          "),_.YNc(133,se,4,12,"bit-access-selector",45),_.qZA(),_._uU(134,"\n      "),_.qZA()}if(2&e){const e=_.MAs(81),t=_.oxw();_.Q6J("selectedIndex",t.tabIndex),_.xp6(2),_.Q6J("label",_.lcZ(3,33,"role")),_.xp6(3),_.Q6J("ngIf",!t.editMode),_.xp6(5),_.hij("\n              ",_.lcZ(11,35,"memberRole"),"\n              "),_.xp6(2),_.s9C("appA11yTitle",_.lcZ(13,37,"learnMore")),_.xp6(9),_.Q6J("value",t.organizationUserType.User),_.xp6(3),_.hij("\n                ",_.lcZ(25,39,"user"),"\n                "),_.xp6(3),_.hij("\n                  ",_.lcZ(28,41,"userDesc"),"\n                "),_.xp6(7),_.Q6J("value",t.organizationUserType.Manager),_.xp6(3),_.hij("\n                ",_.lcZ(38,43,"manager"),"\n                "),_.xp6(3),_.hij("\n                  ",_.lcZ(41,45,"managerDesc"),"\n                "),_.xp6(7),_.Q6J("value",t.organizationUserType.Admin),_.xp6(3),_.hij("\n                ",_.lcZ(51,47,"admin"),"\n                "),_.xp6(3),_.hij("\n                  ",_.lcZ(54,49,"adminDesc"),"\n                "),_.xp6(7),_.Q6J("value",t.organizationUserType.Owner),_.xp6(3),_.hij("\n                ",_.lcZ(64,51,"owner"),"\n                "),_.xp6(3),_.hij("\n                  ",_.lcZ(67,53,"ownerDesc"),"\n                "),_.xp6(7),_.Q6J("value",t.organizationUserType.Custom),_.uIk("disabled",!t.canUseCustomPermissions||null),_.xp6(3),_.hij("\n                ",_.lcZ(77,55,"custom"),"\n                "),_.xp6(2),_.Q6J("ngIf",!t.canUseCustomPermissions)("ngIfElse",e),_.xp6(8),_.Q6J("ngIf",t.customUserTypeSelected),_.xp6(2),_.Q6J("ngIf",t.canUseSecretsManager),_.xp6(5),_.Oqu(_.lcZ(94,57,"externalId")),_.xp6(6),_.Oqu(_.lcZ(100,59,"externalIdDesc")),_.xp6(5),_.Q6J("ngIf",t.organization.useGroups),_.xp6(2),_.Q6J("label",_.lcZ(107,61,"collections")),_.xp6(3),_.Q6J("ngIf",t.organization.useGroups),_.xp6(9),_.hij("\n                ",_.lcZ(119,63,"accessAllCollectionsDesc"),"\n                "),_.xp6(2),_.s9C("appA11yTitle",_.lcZ(121,65,"learnMore")),_.xp6(8),_.Oqu(_.lcZ(129,67,"accessAllCollectionsHelp")),_.xp6(5),_.Q6J("ngIf",!t.accessAllCollections)}}function ae(e,t){if(1&e&&(_.TgZ(0,"button",78),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e){const e=_.oxw();_.Q6J("bitAction",e.restore)("disabled",e.loading),_.xp6(1),_.hij("\n          ",_.lcZ(2,3,"restoreAccess"),"\n        ")}}function ce(e,t){if(1&e&&(_.TgZ(0,"button",78),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e){const e=_.oxw();_.Q6J("bitAction",e.revoke)("disabled",e.loading),_.xp6(1),_.hij("\n          ",_.lcZ(2,3,"revokeAccess"),"\n        ")}}function le(e,t){if(1&e&&(_._UZ(0,"button",79),_.ALo(1,"i18n")),2&e){const e=_.oxw();_.Q6J("appA11yTitle",_.lcZ(1,3,"delete"))("bitAction",e.delete)("disabled",e.loading)}}!function(e){e[e.Role=0]="Role",e[e.Groups=1]="Groups",e[e.Collections=2]="Collections"}(D||(D={})),function(e){e.Saved="saved",e.Canceled="canceled",e.Deleted="deleted",e.Revoked="revoked",e.Restored="restored"}($||($={}));class ue{get customUserTypeSelected(){return this.formGroup.value.type===g.j.Custom}get accessAllCollections(){return this.formGroup.value.accessAllCollections}constructor(e,t,n,i,r,a,c,l,u,d){this.params=e,this.dialogRef=t,this.i18nService=n,this.platformUtilsService=i,this.organizationService=r,this.formBuilder=a,this.collectionAdminService=c,this.groupService=l,this.userService=u,this.organizationUserService=d,this.loading=!0,this.editMode=!1,this.isRevoked=!1,this.access="selected",this.collections=[],this.organizationUserType=g.j,this.PermissionMode=f.R9,this.collectionAccessItems=[],this.groupAccessItems=[],this.formGroup=this.formBuilder.group({emails:["",[o.kI.required,Z]],type:g.j.User,externalId:this.formBuilder.control({value:"",disabled:!0}),accessAllCollections:!1,accessSecretsManager:!1,access:[[]],groups:[[]]}),this.permissionsGroup=this.formBuilder.group({manageAssignedCollectionsGroup:this.formBuilder.group({manageAssignedCollections:!1,editAssignedCollections:!1,deleteAssignedCollections:!1}),manageAllCollectionsGroup:this.formBuilder.group({manageAllCollections:!1,createNewCollections:!1,editAnyCollection:!1,deleteAnyCollection:!1}),accessEventLogs:!1,accessImportExport:!1,accessReports:!1,manageGroups:!1,manageSso:!1,managePolicies:!1,manageUsers:!1,manageResetPassword:!1}),this.destroy$=new s.x,this.submit=()=>F(this,void 0,void 0,(function*(){var e;if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return void(this.tabIndex!==D.Role&&this.platformUtilsService.showToast("error",null,this.i18nService.t("fieldOnTabRequiresAttention",this.i18nService.t("role"))));if(!this.canUseCustomPermissions&&this.customUserTypeSelected)return void this.platformUtilsService.showToast("error",null,this.i18nService.t("customNonEnterpriseError"));const t=new U.Qg;if(t.id=this.params.organizationUserId,t.organizationId=this.params.organizationId,t.accessAll=this.accessAllCollections,t.type=this.formGroup.value.type,t.permissions=this.setRequestPermissions(null!==(e=t.permissions)&&void 0!==e?e:new m.Q,t.type!==g.j.Custom),t.collections=this.formGroup.value.access.filter((e=>e.type===f.zD.Collection)).map(f.E2),t.groups=this.formGroup.value.groups.map((e=>e.id)),t.accessSecretsManager=this.formGroup.value.accessSecretsManager,this.editMode)yield this.userService.save(t);else{t.id=this.params.organizationUserId;const e=[...new Set(this.formGroup.value.emails.trim().split(/\s*,\s*/))];if(e.length>20)return void this.formGroup.controls.emails.setErrors({tooManyEmails:{message:this.i18nService.t("tooManyEmails",20)}});yield this.userService.invite(e,t)}this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedUserId":"invitedUsers",this.params.name)),this.close($.Saved)})),this.delete=()=>F(this,void 0,void 0,(function*(){if(!this.editMode)return;const e=this.params.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";if(!(yield this.platformUtilsService.showDialog(this.i18nService.t(e),this.i18nService.t("removeUserIdAccess",this.params.name),this.i18nService.t("yes"),this.i18nService.t("no"),"warning",!1,"app-user-add-edit .modal-content")))return!1;yield this.organizationUserService.deleteOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.params.name)),this.close($.Deleted)})),this.revoke=()=>F(this,void 0,void 0,(function*(){if(!this.editMode)return;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("revokeUserConfirmation"),this.i18nService.t("revokeUserId",this.params.name),this.i18nService.t("revokeAccess"),this.i18nService.t("cancel"),"warning",!1,"app-user-add-edit .modal-content")))return!1;yield this.organizationUserService.revokeOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("revokedUserId",this.params.name)),this.isRevoked=!0,this.close($.Revoked)})),this.restore=()=>F(this,void 0,void 0,(function*(){this.editMode&&(yield this.organizationUserService.restoreOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredUserId",this.params.name)),this.isRevoked=!1,this.close($.Restored))}))}ngOnInit(){var e;return F(this,void 0,void 0,(function*(){this.editMode=null!=this.params.organizationUserId,this.tabIndex=null!==(e=this.params.initialTab)&&void 0!==e?e:D.Role,this.title=this.i18nService.t(this.editMode?"editMember":"inviteMember");const t=(0,r.of)(this.organizationService.get(this.params.organizationId)).pipe((0,a.d)({refCount:!0,bufferSize:1})),n=t.pipe((0,c.w)((e=>e.useGroups?this.groupService.getAll(this.params.organizationId):(0,r.of)([]))));(0,l.a)({organization:t,collections:this.collectionAdminService.getAll(this.params.organizationId),userDetails:this.params.organizationUserId?this.userService.get(this.params.organizationId,this.params.organizationUserId):(0,r.of)(null),groups:n}).pipe((0,u.R)(this.destroy$)).subscribe((({organization:e,collections:t,userDetails:n,groups:i})=>{if(this.organization=e,this.canUseCustomPermissions=e.useCustomPermissions,this.canUseSecretsManager=e.useSecretsManager&&(0,h.Sp)("secretsManager"),this.collectionAccessItems=[].concat(t.map((e=>de(e)))),this.groupAccessItems=[].concat(i.map((e=>{return t=e,{type:f.zD.Group,id:t.id,labelName:t.name,listName:t.name};var t}))),this.params.organizationUserId){if(!n)throw new Error("Could not find user to edit.");this.isRevoked=n.status===p.D.Revoked;const e={editAssignedCollections:n.permissions.editAssignedCollections,deleteAssignedCollections:n.permissions.deleteAssignedCollections,manageAssignedCollections:n.permissions.editAssignedCollections&&n.permissions.deleteAssignedCollections},o={createNewCollections:n.permissions.createNewCollections,editAnyCollection:n.permissions.editAnyCollection,deleteAnyCollection:n.permissions.deleteAnyCollection,manageAllCollections:n.permissions.createNewCollections&&n.permissions.editAnyCollection&&n.permissions.deleteAnyCollection};n.type===g.j.Custom&&this.permissionsGroup.patchValue({accessEventLogs:n.permissions.accessEventLogs,accessImportExport:n.permissions.accessImportExport,accessReports:n.permissions.accessReports,manageGroups:n.permissions.manageGroups,manageSso:n.permissions.manageSso,managePolicies:n.permissions.managePolicies,manageUsers:n.permissions.manageUsers,manageResetPassword:n.permissions.manageResetPassword,manageAssignedCollectionsGroup:e,manageAllCollectionsGroup:o});const s=i.filter((e=>n.groups.includes(e.id))).flatMap((e=>e.collections.map((n=>{const i=t.find((e=>e.id===n.id));return{group:e,collection:i,accessSelection:n}}))));this.collectionAccessItems=this.collectionAccessItems.concat(s.map((({collection:e,accessSelection:t,group:n})=>de(e,t,n))));const r=function(e){if(null==e)return[];return[].concat(e.collections.map((e=>({id:e.id,type:f.zD.Collection,permission:(0,f.d4)(e)}))))}(n),a=function(e){if(null==e)return[];return[].concat(e.map((e=>({id:e,type:f.zD.Group}))))}(n.groups);this.formGroup.removeControl("emails"),this.formGroup.patchValue({type:n.type,externalId:n.externalId,accessAllCollections:n.accessAll,access:r,accessSecretsManager:n.accessSecretsManager,groups:a})}this.loading=!1}))}))}check(e,t){e.checked=null==t?!e.checked:t,e.checked||(e.readOnly=!1)}selectAll(e){this.collections.forEach((t=>this.check(t,e)))}setRequestPermissions(e,t){if(t)return new m.Q;const n={accessEventLogs:this.permissionsGroup.value.accessEventLogs,accessImportExport:this.permissionsGroup.value.accessImportExport,accessReports:this.permissionsGroup.value.accessReports,manageGroups:this.permissionsGroup.value.manageGroups,manageSso:this.permissionsGroup.value.manageSso,managePolicies:this.permissionsGroup.value.managePolicies,manageUsers:this.permissionsGroup.value.manageUsers,manageResetPassword:this.permissionsGroup.value.manageResetPassword,createNewCollections:this.permissionsGroup.value.manageAllCollectionsGroup.createNewCollections,editAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.editAnyCollection,deleteAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.deleteAnyCollection,editAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.editAssignedCollections,deleteAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.deleteAssignedCollections};return Object.assign(e,n)}handleDependentPermissions(){this.permissionsGroup.value.manageResetPassword&&!this.permissionsGroup.value.manageUsers&&(this.permissionsGroup.value.manageUsers=!0,document.getElementById("manageUsers").checked=!0,this.platformUtilsService.showToast("info",null,this.i18nService.t("resetPasswordManageUsers")))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cancel(){return F(this,void 0,void 0,(function*(){this.close($.Canceled)}))}close(e){this.dialogRef.close(e)}}function de(e,t,n){return{type:f.zD.Collection,id:n?`${e.id}-${n.id}`:e.id,labelName:e.name,listName:e.name,readonly:void 0!==n,readonlyPermission:t?(0,f.d4)(t):void 0,viaGroupName:null==n?void 0:n.name}}ue.ɵfac=function(e){return new(e||ue)(_.Y36(i.Kt),_.Y36(i.zj),_.Y36(b.D),_.Y36(w.P),_.Y36(d.Mn),_.Y36(o.qu),_.Y36(U.m$),_.Y36(U.lT),_.Y36(U.XD),_.Y36(v.t))},ue.ɵcmp=_.Xpm({type:ue,selectors:[["app-member-dialog"]],decls:40,vars:19,consts:[[3,"formGroup","bitSubmit"],[3,"disablePadding"],["bitDialogTitle",""],["class","tw-text-sm tw-normal-case tw-text-muted",4,"ngIf"],["bitBadge","","badgeType","secondary",4,"ngIf"],["bitDialogContent",""],[4,"ngIf"],[3,"selectedIndex","selectedIndexChange",4,"ngIf"],["bitDialogFooter","",1,"tw-flex","tw-flex-row","tw-gap-2"],["type","submit","bitButton","","bitFormButton","","buttonType","primary",3,"disabled"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"disabled","click"],[1,"tw-ml-auto"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled",4,"ngIf"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"appA11yTitle","bitAction","disabled",4,"ngIf"],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitBadge","","badgeType","secondary"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],["role","radiogroup","aria-labelledby","roleGroupLabel",1,"tw-mb-6"],["id","roleGroupLabel",1,"tw-mb-2","tw-block","tw-text-base","tw-font-semibold","tw-text-main"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"tw-mb-2","tw-flex","tw-items-baseline"],["type","radio","id","userTypeUser","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeUser",1,"tw-m-0"],[1,"text-base","tw-block","tw-font-normal","tw-text-muted"],["type","radio","id","userTypeManager","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeManager",1,"tw-m-0"],["type","radio","id","userTypeAdmin","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeAdmin",1,"tw-m-0"],["type","radio","id","userTypeOwner","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeOwner",1,"tw-m-0"],[1,"tw-flex","tw-items-baseline"],["type","radio","id","userTypeCustom","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeCustom",1,"tw-m-0"],[4,"ngIf","ngIfElse"],["enterprise",""],["bitInput","","type","text","formControlName","externalId"],[3,"label",4,"ngIf"],["class","tw-mb-6",4,"ngIf"],[1,"tw-mb-6"],["type","checkbox","bitCheckbox","","formControlName","accessAllCollections"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/#access-control",3,"appA11yTitle"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText",4,"ngIf"],["id","emails","type","text","appAutoFocus","","bitInput","","formControlName","emails"],["href","https://bitwarden.com/contact/","target","_blank"],[1,"mt-4","d-flex","tw-font-semibold"],[1,"row",3,"formGroup"],[1,"col-6"],[1,"mb-3"],[1,"tw-font-semibold"],[1,"tw-mt-0","tw-mb-2","tw-mr-2"],["parentId","manageAssignedCollections",3,"checkboxes"],["type","checkbox","name","accessEventLogs","id","accessEventLogs","formControlName","accessEventLogs"],["for","accessEventLogs",1,"!tw-font-normal"],["type","checkbox","name","accessImportExport","id","accessImportExport","formControlName","accessImportExport"],["for","accessImportExport",1,"!tw-font-normal"],["type","checkbox","name","accessReports","id","accessReports","formControlName","accessReports"],["for","accessReports",1,"!tw-font-normal"],["parentId","manageAllCollections",3,"checkboxes"],["type","checkbox","name","manageGroups","id","manageGroups","formControlName","manageGroups"],["for","manageGroups",1,"!tw-font-normal"],["type","checkbox","name","manageSso","id","manageSso","formControlName","manageSso"],["for","manageSso",1,"!tw-font-normal"],["type","checkbox","name","managePolicies","id","managePolicies","formControlName","managePolicies"],["for","managePolicies",1,"!tw-font-normal"],["type","checkbox","name","manageUsers","id","manageUsers","formControlName","manageUsers",3,"change"],["for","manageUsers",1,"!tw-font-normal"],["type","checkbox","name","manageResetPassword","id","manageResetPassword","formControlName","manageResetPassword",3,"change"],["for","manageResetPassword",1,"!tw-font-normal"],[1,"mt-4"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/manage-your-organization/#access-to-secrets-manager",3,"appA11yTitle"],[1,"tw-text-muted"],["type","checkbox","bitCheckbox","","formControlName","accessSecretsManager"],["formControlName","groups",3,"items","columnHeader","selectorLabelText","emptySelectionText"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"appA11yTitle","bitAction","disabled"]],template:function(e,t){1&e&&(_.TgZ(0,"form",0),_._uU(1,"\n  "),_.TgZ(2,"bit-dialog",1),_._uU(3,"\n    "),_.TgZ(4,"span",2),_._uU(5),_.YNc(6,K,2,1,"span",3),_._uU(7,"\n      "),_.YNc(8,H,3,3,"span",4),_._uU(9,"\n    "),_.qZA(),_._uU(10,"\n    "),_.TgZ(11,"div",5),_._uU(12,"\n      "),_.YNc(13,W,9,6,"ng-container",6),_._uU(14,"\n      "),_.YNc(15,re,135,69,"bit-tab-group",7),_._uU(16,"\n    "),_.qZA(),_._uU(17,"\n    "),_.TgZ(18,"div",8),_._uU(19,"\n      "),_.TgZ(20,"button",9),_._uU(21),_.ALo(22,"i18n"),_.qZA(),_._uU(23,"\n      "),_.TgZ(24,"button",10),_.NdJ("click",(function(){return t.cancel()})),_._uU(25),_.ALo(26,"i18n"),_.qZA(),_._uU(27,"\n      "),_.TgZ(28,"div",11),_._uU(29,"\n        "),_.YNc(30,ae,3,5,"button",12),_._uU(31,"\n        "),_.YNc(32,ce,3,5,"button",12),_._uU(33,"\n        "),_.YNc(34,le,2,5,"button",13),_._uU(35,"\n      "),_.qZA(),_._uU(36,"\n    "),_.qZA(),_._uU(37,"\n  "),_.qZA(),_._uU(38,"\n"),_.qZA(),_._uU(39,"\n")),2&e&&(_.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),_.xp6(2),_.Q6J("disablePadding",!t.loading),_.xp6(3),_.hij("\n      ",t.title,"\n      "),_.xp6(1),_.Q6J("ngIf",!t.loading&&t.params.name),_.xp6(2),_.Q6J("ngIf",t.isRevoked),_.xp6(5),_.Q6J("ngIf",t.loading),_.xp6(2),_.Q6J("ngIf",!t.loading),_.xp6(5),_.Q6J("disabled",t.loading),_.xp6(1),_.hij("\n        ",_.lcZ(22,15,"save"),"\n      "),_.xp6(3),_.Q6J("disabled",t.loading),_.xp6(1),_.hij("\n        ",_.lcZ(26,17,"cancel"),"\n      "),_.xp6(5),_.Q6J("ngIf",t.editMode&&t.isRevoked),_.xp6(2),_.Q6J("ngIf",t.editMode&&!t.isRevoked),_.xp6(2),_.Q6J("ngIf",t.editMode))},dependencies:[A.O5,o._Y,o.Fj,o.Wl,o._,o.JJ,o.JL,o.sg,o.u,x.B,y.Q,T.b,C.u,q.l,k.r,S.b,I.a,P.d,M.G,N.A,L.u,J.M,z.Q,O.Q,R.i,G.f,B,Y.C],encapsulation:2});var pe=n(20953),ge=n(59355);class me{}me.ɵfac=function(e){return new(e||me)},me.ɵmod=_.oAB({type:me}),me.ɵinj=_.cJS({imports:[ge.PV,pe.c]});var he=n(71146),Ue=n(25158),fe=n(47064),Ze=n(92786),_e=n(59260),be=n(59157),we=n(99042),ve=n(70032),Ae=n(5712),xe=n(19576),ye=n(77494);class Te{}var Ce=n(60111),qe=n(74524),ke=n(28978),Se=n(53988),Ie=n(5278),Pe=n(21326),Me=n(81621),Ne=n(33287),Le=n(53083),Je=n(13218);class ze{constructor(){this.collections=[],this.groups=[],this.groupNames=[],this.collectionNames=[]}static fromResponse(e){const t=Object.assign(new ze,e);return null!=e.collections&&(t.collections=e.collections.map((e=>new Je.K(e)))),null!=e.groups&&(t.groups=e.groups),t}}var Oe=n(85063),Re=n(44573),Ge=n(53707),Qe=n(14970),Ye=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};function je(e,t){1&e&&(_.TgZ(0,"app-callout",14),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e&&(_.xp6(1),_.hij("\n          ",_.lcZ(2,1,"noSelectedUsersApplicable"),"\n        "))}function Ee(e,t){if(1&e&&(_.TgZ(0,"app-callout",15),_._uU(1),_.qZA()),2&e){const e=_.oxw();_.xp6(1),_.hij("\n          ",e.error,"\n        ")}}function Be(e,t){1&e&&(_.TgZ(0,"app-callout",20),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e&&(_.xp6(1),_.hij("\n            ",_.lcZ(2,1,"revokeUsersWarning"),"\n          "))}function De(e,t){if(1&e&&(_.TgZ(0,"small",24),_._uU(1),_.qZA()),2&e){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.name)}}function $e(e,t){if(1&e&&(_.TgZ(0,"tr"),_._uU(1,"\n              "),_.TgZ(2,"td",21),_._uU(3,"\n                "),_._UZ(4,"bit-avatar",22),_.ALo(5,"userName"),_._uU(6,"\n              "),_.qZA(),_._uU(7,"\n              "),_.TgZ(8,"td"),_._uU(9),_.YNc(10,De,2,1,"small",23),_._uU(11,"\n              "),_.qZA(),_._uU(12,"\n            "),_.qZA()),2&e){const e=t.$implicit;_.xp6(4),_.Q6J("text",_.lcZ(5,4,e))("id",e.id),_.xp6(5),_.hij("\n                ",e.email,"\n                "),_.xp6(1),_.Q6J("ngIf",e.name)}}function Fe(e,t){if(1&e&&(_.ynx(0),_._uU(1,"\n          "),_.YNc(2,Be,3,3,"app-callout",16),_._uU(3,"\n          "),_.TgZ(4,"table",17),_._uU(5,"\n            "),_.TgZ(6,"thead"),_._uU(7,"\n              "),_.TgZ(8,"tr"),_._uU(9,"\n                "),_.TgZ(10,"th",18),_._uU(11),_.ALo(12,"i18n"),_.qZA(),_._uU(13,"\n              "),_.qZA(),_._uU(14,"\n            "),_.qZA(),_._uU(15,"\n            "),_.YNc(16,$e,13,6,"tr",19),_._uU(17,"\n          "),_.qZA(),_._uU(18,"\n        "),_.BQk()),2&e){const e=_.oxw();_.xp6(2),_.Q6J("ngIf",e.users.length>0&&!e.error&&e.isRevoking),_.xp6(9),_.Oqu(_.lcZ(12,3,"user")),_.xp6(5),_.Q6J("ngForOf",e.users)}}function Ke(e,t){if(1&e&&(_.TgZ(0,"small",24),_._uU(1),_.qZA()),2&e){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.name)}}function He(e,t){if(1&e&&(_.TgZ(0,"td"),_._uU(1),_.qZA()),2&e){const e=_.oxw().$implicit,t=_.oxw(2);_.xp6(1),_.hij("\n                ",t.statuses.get(e.id),"\n              ")}}function We(e,t){1&e&&(_.TgZ(0,"td"),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e&&(_.xp6(1),_.hij("\n                ",_.lcZ(2,1,"bulkFilteredMessage"),"\n              "))}function Ve(e,t){if(1&e&&(_.TgZ(0,"tr"),_._uU(1,"\n              "),_.TgZ(2,"td",21),_._uU(3,"\n                "),_._UZ(4,"bit-avatar",22),_.ALo(5,"userName"),_._uU(6,"\n              "),_.qZA(),_._uU(7,"\n              "),_.TgZ(8,"td"),_._uU(9),_.YNc(10,Ke,2,1,"small",23),_._uU(11,"\n              "),_.qZA(),_._uU(12,"\n              "),_.YNc(13,He,2,1,"td",10),_._uU(14,"\n              "),_.YNc(15,We,3,3,"td",10),_._uU(16,"\n            "),_.qZA()),2&e){const e=t.$implicit,n=_.oxw(2);_.xp6(4),_.Q6J("text",_.lcZ(5,6,e))("id",e.id),_.xp6(5),_.hij("\n                ",e.email,"\n                "),_.xp6(1),_.Q6J("ngIf",e.name),_.xp6(3),_.Q6J("ngIf",n.statuses.has(e.id)),_.xp6(2),_.Q6J("ngIf",!n.statuses.has(e.id))}}function Xe(e,t){if(1&e&&(_.ynx(0),_._uU(1,"\n          "),_.TgZ(2,"table",17),_._uU(3,"\n            "),_.TgZ(4,"thead"),_._uU(5,"\n              "),_.TgZ(6,"tr"),_._uU(7,"\n                "),_.TgZ(8,"th",18),_._uU(9),_.ALo(10,"i18n"),_.qZA(),_._uU(11,"\n                "),_.TgZ(12,"th"),_._uU(13),_.ALo(14,"i18n"),_.qZA(),_._uU(15,"\n              "),_.qZA(),_._uU(16,"\n            "),_.qZA(),_._uU(17,"\n            "),_.YNc(18,Ve,17,8,"tr",19),_._uU(19,"\n          "),_.qZA(),_._uU(20,"\n        "),_.BQk()),2&e){const e=_.oxw();_.xp6(9),_.Oqu(_.lcZ(10,3,"user")),_.xp6(4),_.Oqu(_.lcZ(14,5,"status")),_.xp6(5),_.Q6J("ngForOf",e.users)}}function et(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"button",25),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw();return _.KtG(t.submit())})),_._uU(1,"\n          "),_._UZ(2,"i",26),_.ALo(3,"i18n"),_._uU(4,"\n          "),_.TgZ(5,"span"),_._uU(6),_.qZA(),_._uU(7,"\n        "),_.qZA()}if(2&e){const e=_.oxw();_.Q6J("disabled",e.loading),_.xp6(2),_.s9C("title",_.lcZ(3,3,"loading")),_.xp6(4),_.Oqu(e.bulkTitle)}}class tt{constructor(e,t,n){this.i18nService=e,this.organizationUserService=t,this.statuses=new Map,this.loading=!1,this.done=!1,this.isRevoking=n.data.isRevoking,this.organizationId=n.data.organizationId,this.users=n.data.users}get bulkTitle(){const e=this.isRevoking?"revokeUsers":"restoreUsers";return this.i18nService.t(e)}submit(){return Ye(this,void 0,void 0,(function*(){this.loading=!0;try{const e=yield this.performBulkUserAction(),t=this.isRevoking?"bulkRevokedMessage":"bulkRestoredMessage";e.data.forEach((e=>{const n=""!==e.error?e.error:this.i18nService.t(t);this.statuses.set(e.id,n)})),this.done=!0}catch(e){this.error=e.message}this.loading=!1}))}performBulkUserAction(){return Ye(this,void 0,void 0,(function*(){const e=this.users.map((e=>e.id));return this.isRevoking?yield this.organizationUserService.revokeManyOrganizationUsers(this.organizationId,e):yield this.organizationUserService.restoreManyOrganizationUsers(this.organizationId,e)}))}}tt.ɵfac=function(e){return new(e||tt)(_.Y36(b.D),_.Y36(v.t),_.Y36(ye.u))},tt.ɵcmp=_.Xpm({type:tt,selectors:[["app-bulk-restore-revoke"]],decls:42,vars:12,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","danger"],["type","error"],["type","warning",4,"ngIf"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["type","warning"],["width","30"],["size","small",3,"text","id"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(_.TgZ(0,"div",0),_._uU(1,"\n  "),_.TgZ(2,"div",1),_._uU(3,"\n    "),_.TgZ(4,"div",2),_._uU(5,"\n      "),_.TgZ(6,"div",3),_._uU(7,"\n        "),_.TgZ(8,"h1",4),_._uU(9),_.qZA(),_._uU(10,"\n        "),_.TgZ(11,"button",5),_.ALo(12,"i18n"),_._uU(13,"\n          "),_.TgZ(14,"span",6),_._uU(15,"×"),_.qZA(),_._uU(16,"\n        "),_.qZA(),_._uU(17,"\n      "),_.qZA(),_._uU(18,"\n      "),_.TgZ(19,"div",7),_._uU(20,"\n        "),_.YNc(21,je,3,3,"app-callout",8),_._uU(22,"\n        "),_.YNc(23,Ee,2,1,"app-callout",9),_._uU(24,"\n        "),_.YNc(25,Fe,19,5,"ng-container",10),_._uU(26,"\n        "),_.YNc(27,Xe,21,7,"ng-container",10),_._uU(28,"\n      "),_.qZA(),_._uU(29,"\n      "),_.TgZ(30,"div",11),_._uU(31,"\n        "),_.YNc(32,et,8,5,"button",12),_._uU(33,"\n        "),_.TgZ(34,"button",13),_._uU(35),_.ALo(36,"i18n"),_.qZA(),_._uU(37,"\n      "),_.qZA(),_._uU(38,"\n    "),_.qZA(),_._uU(39,"\n  "),_.qZA(),_._uU(40,"\n"),_.qZA(),_._uU(41,"\n")),2&e&&(_.xp6(9),_.hij("\n          ",t.bulkTitle,"\n        "),_.xp6(2),_.s9C("appA11yTitle",_.lcZ(12,8,"close")),_.xp6(10),_.Q6J("ngIf",t.users.length<=0),_.xp6(2),_.Q6J("ngIf",t.error),_.xp6(2),_.Q6J("ngIf",!t.done),_.xp6(2),_.Q6J("ngIf",t.done),_.xp6(5),_.Q6J("ngIf",!t.done&&t.users.length>0),_.xp6(3),_.hij("\n          ",_.lcZ(36,10,"close"),"\n        "))},dependencies:[A.sg,A.O5,x.B,Ge.O,Qe.A,Y.C,xe.z],encapsulation:2});var nt=n(25398),it=n(81542),ot=n(26987),st=n(88160),rt=n(88982),at=n(13992),ct=n(27737),lt=n(83924),ut=n(92785),dt=n(27885),pt=n(24610),gt=n(62374),mt=n(85356),ht=n(2051),Ut=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};function ft(e,t){if(1&e&&(_.TgZ(0,"small",30),_._uU(1),_.qZA()),2&e){const e=_.oxw();_.xp6(1),_.Oqu(e.name)}}function Zt(e,t){if(1&e&&(_.TgZ(0,"app-callout",31),_.ALo(1,"i18n"),_._uU(2,"\n        "),_.qZA()),2&e){const e=_.oxw();_.s9C("enforcedPolicyMessage",_.lcZ(1,2,"resetPasswordMasterPasswordPolicyInEffect")),_.Q6J("enforcedPolicyOptions",e.enforcedPolicyOptions)}}const _t=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};class bt{constructor(e,t,n,i,o,r,a){this.i18nService=e,this.platformUtilsService=t,this.passwordGenerationService=n,this.policyService=i,this.cryptoService=o,this.logService=r,this.organizationUserService=a,this.onPasswordReset=new _.vpe,this.newPassword=null,this.showPassword=!1,this.destroy$=new s.x}ngOnInit(){return Ut(this,void 0,void 0,(function*(){this.policyService.masterPasswordPolicyOptions$().pipe((0,u.R)(this.destroy$)).subscribe((e=>this.enforcedPolicyOptions=e))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get loggedOutWarningName(){return null!=this.name?this.name:this.i18nService.t("thisUser")}generatePassword(){var e,t;return Ut(this,void 0,void 0,(function*(){const n=null!==(t=null===(e=yield this.passwordGenerationService.getOptions())||void 0===e?void 0:e[0])&&void 0!==t?t:{};this.newPassword=yield this.passwordGenerationService.generatePassword(n),this.passwordStrengthComponent.updatePasswordStrength(this.newPassword)}))}togglePassword(){this.showPassword=!this.showPassword,document.getElementById("newPassword").focus()}copy(e){null!=e&&(this.platformUtilsService.copyToClipboard(e,{window}),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t("password"))))}submit(){return Ut(this,void 0,void 0,(function*(){if(null==this.newPassword||""===this.newPassword)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordRequired")),!1;if(this.newPassword.length<Q.c.minimumPasswordLength)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordMinlength",Q.c.minimumPasswordLength)),!1;if(null==this.enforcedPolicyOptions||this.policyService.evaluateMasterPassword(this.passwordStrengthResult.score,this.newPassword,this.enforcedPolicyOptions)){if(this.passwordStrengthResult.score<3){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("weakMasterPasswordDesc"),this.i18nService.t("weakMasterPassword"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1}try{this.formPromise=this.organizationUserService.getOrganizationUserResetPasswordDetails(this.organizationId,this.id).then((e=>Ut(this,void 0,void 0,(function*(){if(null==e)throw new Error(this.i18nService.t("resetPasswordDetailsError"));const t=e.kdf,n=e.kdfIterations,i=e.kdfMemory,o=e.kdfParallelism,s=e.resetPasswordKey,r=e.encryptedPrivateKey,a=yield this.cryptoService.getOrgKey(this.organizationId),c=yield this.cryptoService.decryptToBytes(new rt._(r),a),l=yield this.cryptoService.rsaDecrypt(s,c),u=new at.N(l),d=yield this.cryptoService.makeKey(this.newPassword,this.email.trim().toLowerCase(),t,new st.E(n,i,o)),p=yield this.cryptoService.hashPassword(this.newPassword,d),g=yield this.cryptoService.remakeEncKey(d,u),m=new ot.s;return m.key=g[1].encryptedString,m.newMasterPasswordHash=p,this.organizationUserService.putOrganizationUserResetPassword(this.organizationId,this.id,m)})))),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("resetPasswordSuccess")),this.onPasswordReset.emit()}catch(e){this.logService.error(e)}}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordPolicyRequirementsNotMet"))}))}getStrengthResult(e){this.passwordStrengthResult=e}}bt.ɵfac=function(e){return new(e||bt)(_.Y36(b.D),_.Y36(w.P),_.Y36(ct.UW),_.Y36(lt.d),_.Y36(ut.$),_.Y36(dt.$),_.Y36(v.t))},bt.ɵcmp=_.Xpm({type:bt,selectors:[["app-reset-password"]],viewQuery:function(e,t){if(1&e&&_.Gf(it.Z,5),2&e){let e;_.iGM(e=_.CRH())&&(t.passwordStrengthComponent=e.first)}},inputs:{name:"name",email:"email",id:"id",organizationId:"organizationId"},outputs:{onPasswordReset:"onPasswordReset"},decls:97,vars:44,consts:[["role","dialog","aria-modal","true","aria-labelledby","resetPasswordTitle",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","resetPasswordTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["type","info",3,"enforcedPolicyOptions","enforcedPolicyMessage",4,"ngIf"],[1,"row"],[1,"col","form-group"],[1,"d-flex"],["for","newPassword"],[1,"ml-auto","d-flex"],["href","#","appStopClick","",1,"d-block","mr-2","bwi-icon-above-input",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-refresh"],[1,"input-group","mb-1"],["id","newPassword","appAutofocus","","name","NewPassword","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],[3,"password","email","showText","passwordStrengthResult"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"],["type","info",3,"enforcedPolicyOptions","enforcedPolicyMessage"]],template:function(e,t){if(1&e&&(_.TgZ(0,"div",0),_._uU(1,"\n  "),_.TgZ(2,"div",1),_._uU(3,"\n    "),_.TgZ(4,"form",2,3),_.NdJ("ngSubmit",(function(){return t.submit()})),_._uU(6,"\n      "),_.TgZ(7,"div",4),_._uU(8,"\n        "),_.TgZ(9,"h1",5),_._uU(10),_.ALo(11,"i18n"),_.YNc(12,ft,2,1,"small",6),_._uU(13,"\n        "),_.qZA(),_._uU(14,"\n        "),_.TgZ(15,"button",7),_.ALo(16,"i18n"),_._uU(17,"\n          "),_.TgZ(18,"span",8),_._uU(19,"×"),_.qZA(),_._uU(20,"\n        "),_.qZA(),_._uU(21,"\n      "),_.qZA(),_._uU(22,"\n      "),_.TgZ(23,"div",9),_._uU(24,"\n        "),_.TgZ(25,"app-callout",10),_._uU(26),_.ALo(27,"i18n"),_.qZA(),_._uU(28,"\n        "),_.YNc(29,Zt,3,4,"app-callout",11),_._uU(30,"\n        "),_.TgZ(31,"div",12),_._uU(32,"\n          "),_.TgZ(33,"div",13),_._uU(34,"\n            "),_.TgZ(35,"div",14),_._uU(36,"\n              "),_.TgZ(37,"label",15),_._uU(38),_.ALo(39,"i18n"),_.qZA(),_._uU(40,"\n              "),_.TgZ(41,"div",16),_._uU(42,"\n                "),_.TgZ(43,"a",17),_.NdJ("click",(function(){return t.generatePassword()})),_.ALo(44,"i18n"),_._uU(45,"\n                  "),_._UZ(46,"i",18),_._uU(47,"\n                "),_.qZA(),_._uU(48,"\n              "),_.qZA(),_._uU(49,"\n            "),_.qZA(),_._uU(50,"\n            "),_.TgZ(51,"div",19),_._uU(52,"\n              "),_.TgZ(53,"input",20),_.NdJ("ngModelChange",(function(e){return t.newPassword=e})),_.qZA(),_._uU(54,"\n              "),_.TgZ(55,"div",21),_._uU(56,"\n                "),_.TgZ(57,"button",22),_.NdJ("click",(function(){return t.togglePassword()})),_.ALo(58,"i18n"),_._uU(59,"\n                  "),_._UZ(60,"i",23),_._uU(61,"\n                "),_.qZA(),_._uU(62,"\n                "),_.TgZ(63,"button",22),_.NdJ("click",(function(){return t.copy(t.newPassword)})),_.ALo(64,"i18n"),_._uU(65,"\n                  "),_._UZ(66,"i",24),_._uU(67,"\n                "),_.qZA(),_._uU(68,"\n              "),_.qZA(),_._uU(69,"\n            "),_.qZA(),_._uU(70,"\n            "),_.TgZ(71,"app-password-strength",25),_.NdJ("passwordStrengthResult",(function(e){return t.getStrengthResult(e)})),_._uU(72,"\n            "),_.qZA(),_._uU(73,"\n          "),_.qZA(),_._uU(74,"\n        "),_.qZA(),_._uU(75,"\n      "),_.qZA(),_._uU(76,"\n      "),_.TgZ(77,"div",26),_._uU(78,"\n        "),_.TgZ(79,"button",27),_._uU(80,"\n          "),_._UZ(81,"i",28),_.ALo(82,"i18n"),_._uU(83,"\n          "),_.TgZ(84,"span"),_._uU(85),_.ALo(86,"i18n"),_.qZA(),_._uU(87,"\n        "),_.qZA(),_._uU(88,"\n        "),_.TgZ(89,"button",29),_._uU(90),_.ALo(91,"i18n"),_.qZA(),_._uU(92,"\n      "),_.qZA(),_._uU(93,"\n    "),_.qZA(),_._uU(94,"\n  "),_.qZA(),_._uU(95,"\n"),_.qZA(),_._uU(96,"\n")),2&e){const e=_.MAs(5);_.xp6(4),_.Q6J("appApiAction",t.formPromise),_.xp6(6),_.hij("\n          ",_.lcZ(11,20,"resetPassword"),"\n          "),_.xp6(2),_.Q6J("ngIf",t.name),_.xp6(3),_.s9C("appA11yTitle",_.lcZ(16,22,"close")),_.xp6(11),_.hij("",_.xi3(27,24,"resetPasswordLoggedOutWarning",t.loggedOutWarningName),"\n        "),_.xp6(3),_.Q6J("ngIf",t.enforcedPolicyOptions),_.xp6(9),_.Oqu(_.lcZ(39,27,"newPassword")),_.xp6(5),_.s9C("appA11yTitle",_.lcZ(44,29,"generatePassword")),_.xp6(10),_.s9C("type",t.showPassword?"text":"password"),_.Q6J("ngModel",t.newPassword),_.xp6(4),_.s9C("appA11yTitle",_.lcZ(58,31,"toggleVisibility")),_.xp6(3),_.Q6J("ngClass",_.WLB(41,_t,!t.showPassword,t.showPassword)),_.xp6(3),_.s9C("appA11yTitle",_.lcZ(64,33,"copyPassword")),_.xp6(8),_.Q6J("password",t.newPassword)("email",t.email)("showText",!0),_.xp6(8),_.Q6J("disabled",e.loading),_.xp6(2),_.s9C("title",_.lcZ(82,35,"loading")),_.xp6(4),_.Oqu(_.lcZ(86,37,"save")),_.xp6(5),_.hij("\n          ",_.lcZ(91,39,"cancel"),"\n        ")}},dependencies:[A.mk,A.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.On,o.F,x.B,pt.b,gt.U,Ge.O,mt.b,ht.O,it.Z,Y.C],encapsulation:2});var wt=n(55602),vt=n(51430),At=n(37202),xt=n(50137),yt=n(4871),Tt=n(64184),Ct=n(97360),qt=n(63610),kt=n(78817),St=n(56617),It=n(1874),Pt=n(12492),Mt=n(73974),Nt=n(26194),Lt=n(44234),Jt=n(91849),zt=n(54735),Ot=n(50941),Rt=n(26361);let Gt=0;class Qt{constructor(){this.id=Gt++,this.name=`bit-toggle-group-${this.id}`,this.selectedChange=new _.vpe,this.role="radiogroup",this.classList=["tw-flex"]}onInputInteraction(e){this.selected=e,this.selectedChange.emit(e)}}Qt.ɵfac=function(e){return new(e||Qt)},Qt.ɵcmp=_.Xpm({type:Qt,selectors:[["bit-toggle-group"]],hostVars:3,hostBindings:function(e,t){2&e&&(_.uIk("role",t.role),_.Tol(t.classList))},inputs:{selected:"selected"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(_.F$t(),_.Hsn(0))},encapsulation:2});let Yt=0;class jt{constructor(e){this.groupComponent=e,this.id=Yt++,this.tabIndex="-1",this.classList=["tw-group"]}get name(){return this.groupComponent.name}get selected(){return this.groupComponent.selected===this.value}get inputClasses(){return["tw-peer","tw-appearance-none","tw-outline-none"]}get labelClasses(){return["!tw-font-semibold","tw-transition","tw-text-center","tw-border-text-muted","!tw-text-muted","tw-border-solid","tw-border-y","tw-border-r","tw-border-l-0","tw-cursor-pointer","group-first-of-type:tw-border-l","group-first-of-type:tw-rounded-l","group-last-of-type:tw-rounded-r","peer-focus:tw-outline-none","peer-focus:tw-ring","peer-focus:tw-ring-offset-2","peer-focus:tw-ring-primary-500","peer-focus:tw-z-10","peer-focus:tw-bg-primary-500","peer-focus:tw-border-primary-500","peer-focus:!tw-text-contrast","hover:tw-no-underline","hover:tw-bg-text-muted","hover:tw-border-text-muted","hover:!tw-text-contrast","peer-checked:tw-bg-primary-500","peer-checked:tw-border-primary-500","peer-checked:!tw-text-contrast","tw-py-1.5","tw-px-3","!tw-mb-0","[&>[bitBadge]]:tw-relative","[&>[bitBadge]]:tw--top-px"]}onInputInteraction(){this.groupComponent.onInputInteraction(this.value)}}jt.ɵfac=function(e){return new(e||jt)(_.Y36(Qt))},jt.ɵcmp=_.Xpm({type:jt,selectors:[["bit-toggle"]],hostVars:3,hostBindings:function(e,t){2&e&&(_.Ikx("tabIndex",t.tabIndex),_.Tol(t.classList))},inputs:{value:"value"},ngContentSelectors:["*"],decls:3,vars:6,consts:[["type","radio",3,"id","name","ngClass","checked","change"],[3,"for","ngClass"]],template:function(e,t){1&e&&(_.F$t(),_.TgZ(0,"input",0),_.NdJ("change",(function(){return t.onInputInteraction()})),_.qZA(),_.TgZ(1,"label",1),_.Hsn(2),_.qZA()),2&e&&(_.MGl("id","bit-toggle-",t.id,""),_.Q6J("name",t.name)("ngClass",t.inputClasses)("checked",t.selected),_.xp6(1),_.MGl("for","bit-toggle-",t.id,""),_.Q6J("ngClass",t.labelClasses))},dependencies:[A.mk],encapsulation:2});let Et=0;class Bt{constructor(){this.id="search-id-"+Et++}onChange(e){null!=this.notifyOnChange&&this.notifyOnChange(e)}onTouch(){null!=this.notifyOnTouch&&this.notifyOnTouch()}registerOnChange(e){this.notifyOnChange=e}registerOnTouched(e){this.notifyOnTouch=e}writeValue(e){this.searchText=e}setDisabledState(e){this.disabled=e}}Bt.ɵfac=function(e){return new(e||Bt)},Bt.ɵcmp=_.Xpm({type:Bt,selectors:[["app-search-input"]],inputs:{disabled:"disabled",placeholder:"placeholder"},features:[_._Bn([{provide:o.JU,multi:!0,useExisting:Bt}])],decls:15,vars:11,consts:[[1,"tw-sr-only",3,"for"],[1,"tw-relative","tw-flex","tw-items-center"],["aria-hidden","true",1,"tw-absolute","tw-left-2","tw-z-20","!tw-mb-0","tw-cursor-text",3,"for"],[1,"bwi","bwi-search","bwi-fw","tw-text-muted"],["bitInput","","type","search",1,"tw-rounded-l","tw-pl-9",3,"id","placeholder","ngModel","disabled","ngModelChange","blur"]],template:function(e,t){if(1&e&&(_.TgZ(0,"label",0),_._uU(1),_.ALo(2,"i18n"),_.qZA(),_._uU(3,"\n"),_.TgZ(4,"div",1),_._uU(5,"\n  "),_.TgZ(6,"label",2),_._uU(7,"\n    "),_._UZ(8,"i",3),_._uU(9,"\n  "),_.qZA(),_._uU(10,"\n  "),_.TgZ(11,"input",4),_.NdJ("ngModelChange",(function(e){return t.onChange(e)}))("blur",(function(){return t.onTouch()})),_.ALo(12,"i18n"),_.qZA(),_._uU(13,"\n"),_.qZA(),_._uU(14,"\n")),2&e){let e;_.Q6J("for",t.id),_.xp6(1),_.Oqu(_.lcZ(2,7,"search")),_.xp6(5),_.Q6J("for",t.id),_.xp6(5),_.Q6J("id",t.id)("placeholder",null!==(e=t.placeholder)&&void 0!==e?e:_.lcZ(12,9,"search"))("ngModel",t.searchText)("disabled",t.disabled)}},dependencies:[o.Fj,o.JJ,o.On,M.G,Y.C],encapsulation:2});var Dt=n(73672),$t=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};const Ft=["groupsTemplate"],Kt=["eventsTemplate"],Ht=["confirmTemplate"],Wt=["resetPasswordTemplate"],Vt=["bulkStatusTemplate"],Xt=["bulkConfirmTemplate"],en=["bulkRemoveTemplate"];function tn(e,t){if(1&e&&(_.TgZ(0,"span",18),_._uU(1),_.qZA()),2&e){const e=_.oxw();_.xp6(1),_.Oqu(e.allCount)}}function nn(e,t){if(1&e&&(_.TgZ(0,"span",18),_._uU(1),_.qZA()),2&e){const e=_.oxw();_.xp6(1),_.Oqu(e.invitedCount)}}function on(e,t){if(1&e&&(_.TgZ(0,"span",18),_._uU(1),_.qZA()),2&e){const e=_.oxw();_.xp6(1),_.Oqu(e.acceptedCount)}}function sn(e,t){if(1&e&&(_.TgZ(0,"span",18),_._uU(1),_.qZA()),2&e){const e=_.oxw();_.xp6(1),_.Oqu(e.revokedCount)}}function rn(e,t){1&e&&(_.ynx(0),_._uU(1,"\n    "),_._UZ(2,"i",19),_.ALo(3,"i18n"),_._uU(4,"\n    "),_.TgZ(5,"span",20),_._uU(6),_.ALo(7,"i18n"),_.qZA(),_._uU(8,"\n  "),_.BQk()),2&e&&(_.xp6(2),_.s9C("title",_.lcZ(3,2,"loading")),_.xp6(4),_.Oqu(_.lcZ(7,4,"loading")))}function an(e,t){1&e&&(_.TgZ(0,"p"),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e&&(_.xp6(1),_.Oqu(_.lcZ(2,1,"noMembersInList")))}function cn(e,t){1&e&&(_.TgZ(0,"app-callout",39),_.ALo(1,"i18n"),_._uU(2),_.ALo(3,"i18n"),_.qZA()),2&e&&(_.s9C("title",_.lcZ(1,2,"confirmUsers")),_.xp6(2),_.hij("\n        ",_.lcZ(3,4,"usersNeedConfirmed"),"\n      "))}function ln(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw(3);return _.KtG(t.bulkConfirm())})),_._uU(1,"\n                  "),_.TgZ(2,"span",40),_._uU(3,"\n                    "),_._UZ(4,"i",41),_._uU(5),_.ALo(6,"i18n"),_.qZA(),_._uU(7,"\n                "),_.qZA()}2&e&&(_.xp6(5),_.hij("\n                    ",_.lcZ(6,1,"confirmSelected"),"\n                  "))}function un(e,t){1&e&&(_.TgZ(0,"span",60),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e&&(_.xp6(1),_.Oqu(_.lcZ(2,1,"invited")))}function dn(e,t){1&e&&(_.TgZ(0,"span",61),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e&&(_.xp6(1),_.Oqu(_.lcZ(2,1,"needsConfirmation")))}function pn(e,t){1&e&&(_.TgZ(0,"span",60),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e&&(_.xp6(1),_.Oqu(_.lcZ(2,1,"revoked")))}function gn(e,t){if(1&e&&(_.TgZ(0,"div",62),_._uU(1),_.qZA()),2&e){const e=_.oxw().$implicit;_.xp6(1),_.hij("\n                    ",e.email,"\n                  ")}}function mn(e,t){if(1&e&&_._UZ(0,"bit-badge-list",63),2&e){const e=_.oxw().$implicit,t=_.oxw(4);_.Q6J("items",t.organization.useGroups?e.groupNames:e.collectionNames)("maxItems",3)}}function hn(e,t){1&e&&(_.TgZ(0,"span"),_._uU(1),_.ALo(2,"i18n"),_.qZA()),2&e&&(_.xp6(1),_.Oqu(_.lcZ(2,1,"all")))}function Un(e,t){1&e&&(_.ynx(0),_._uU(1,"\n                "),_._UZ(2,"i",64),_.ALo(3,"i18n"),_._uU(4,"\n                "),_.TgZ(5,"span",65),_._uU(6),_.ALo(7,"i18n"),_.qZA(),_._uU(8,"\n              "),_.BQk()),2&e&&(_.xp6(2),_.s9C("title",_.lcZ(3,2,"userUsingTwoStep")),_.xp6(4),_.Oqu(_.lcZ(7,4,"userUsingTwoStep")))}function fn(e,t){1&e&&(_.ynx(0),_._uU(1,"\n                "),_._UZ(2,"i",66),_.ALo(3,"i18n"),_._uU(4,"\n                "),_.TgZ(5,"span",65),_._uU(6),_.ALo(7,"i18n"),_.qZA(),_._uU(8,"\n              "),_.BQk()),2&e&&(_.xp6(2),_.s9C("title",_.lcZ(3,2,"enrolledPasswordReset")),_.xp6(4),_.Oqu(_.lcZ(7,4,"enrolledPasswordReset")))}function Zn(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw().$implicit,n=_.oxw(4);return _.KtG(n.reinvite(t))})),_._uU(1,"\n                  "),_._UZ(2,"i",67),_._uU(3),_.ALo(4,"i18n"),_.qZA()}2&e&&(_.xp6(3),_.hij("\n                  ",_.lcZ(4,1,"resendInvitation"),"\n                "))}function _n(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw().$implicit,n=_.oxw(4);return _.KtG(n.confirm(t))})),_._uU(1,"\n                  "),_.TgZ(2,"span",40),_._uU(3,"\n                    "),_._UZ(4,"i",68),_._uU(5),_.ALo(6,"i18n"),_.qZA(),_._uU(7,"\n                "),_.qZA()}2&e&&(_.xp6(5),_.hij(" ",_.lcZ(6,1,"confirm"),"\n                  "))}function bn(e,t){1&e&&_._UZ(0,"bit-menu-divider")}function wn(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw().$implicit,n=_.oxw(4);return _.KtG(n.edit(t,n.memberTab.Groups))})),_._uU(1,"\n                  "),_._UZ(2,"i",69),_._uU(3),_.ALo(4,"i18n"),_.qZA()}2&e&&(_.xp6(3),_.hij(" ",_.lcZ(4,1,"groups"),"\n                "))}function vn(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw().$implicit,n=_.oxw(4);return _.KtG(n.events(t))})),_._uU(1,"\n                  "),_._UZ(2,"i",70),_._uU(3),_.ALo(4,"i18n"),_.qZA()}2&e&&(_.xp6(3),_.hij(" ",_.lcZ(4,1,"eventLogs"),"\n                "))}function An(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw().$implicit,n=_.oxw(4);return _.KtG(n.resetPassword(t))})),_._uU(1,"\n                  "),_._UZ(2,"i",71),_._uU(3),_.ALo(4,"i18n"),_.qZA()}2&e&&(_.xp6(3),_.hij(" ",_.lcZ(4,1,"resetPassword"),"\n                "))}function xn(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw().$implicit,n=_.oxw(4);return _.KtG(n.restore(t))})),_._uU(1,"\n                  "),_._UZ(2,"i",72),_._uU(3),_.ALo(4,"i18n"),_.qZA()}2&e&&(_.xp6(3),_.hij("\n                  ",_.lcZ(4,1,"restoreAccess"),"\n                "))}function yn(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw().$implicit,n=_.oxw(4);return _.KtG(n.revoke(t))})),_._uU(1,"\n                  "),_._UZ(2,"i",73),_._uU(3),_.ALo(4,"i18n"),_.qZA()}2&e&&(_.xp6(3),_.hij("\n                  ",_.lcZ(4,1,"revokeAccess"),"\n                "))}function Tn(e,t){if(1&e){const e=_.EpF();_.TgZ(0,"tr",43),_._uU(1,"\n            "),_.TgZ(2,"td",44),_.NdJ("click",(function(){const t=_.CHM(e).$implicit,n=_.oxw(4);return _.KtG(n.checkUser(t))})),_._uU(3,"\n              "),_.TgZ(4,"input",45),_.NdJ("ngModelChange",(function(t){const n=_.CHM(e).$implicit;return _.KtG(n.checked=t)})),_.qZA(),_._uU(5,"\n            "),_.qZA(),_._uU(6,"\n            "),_.TgZ(7,"td",46),_.NdJ("click",(function(){const t=_.CHM(e).$implicit,n=_.oxw(4);return _.KtG(n.edit(t))})),_._uU(8,"\n              "),_.TgZ(9,"div",47),_._uU(10,"\n                "),_._UZ(11,"bit-avatar",48),_.ALo(12,"userName"),_._uU(13,"\n                "),_.TgZ(14,"div",49),_._uU(15,"\n                  "),_.TgZ(16,"div"),_._uU(17,"\n                    "),_.TgZ(18,"button",50),_._uU(19),_.qZA(),_._uU(20,"\n                    "),_.YNc(21,un,3,3,"span",51),_._uU(22,"\n                    "),_.YNc(23,dn,3,3,"span",52),_._uU(24,"\n                    "),_.YNc(25,pn,3,3,"span",51),_._uU(26,"\n                  "),_.qZA(),_._uU(27,"\n                  "),_.YNc(28,gn,2,1,"div",53),_._uU(29,"\n                "),_.qZA(),_._uU(30,"\n              "),_.qZA(),_._uU(31,"\n            "),_.qZA(),_._uU(32,"\n\n            "),_.TgZ(33,"td",46),_.NdJ("click",(function(){const t=_.CHM(e).$implicit,n=_.oxw(4);return _.KtG(n.edit(t,n.organization.useGroups?n.memberTab.Groups:n.memberTab.Collections))})),_._uU(34,"\n              "),_.YNc(35,mn,1,2,"bit-badge-list",54),_._uU(36,"\n              "),_.YNc(37,hn,3,3,"span",9),_._uU(38,"\n            "),_.qZA(),_._uU(39,"\n\n            "),_.TgZ(40,"td",55),_.NdJ("click",(function(){const t=_.CHM(e).$implicit,n=_.oxw(4);return _.KtG(n.edit(t,n.memberTab.Role))})),_._uU(41),_.ALo(42,"userType"),_.qZA(),_._uU(43,"\n\n            "),_.TgZ(44,"td",56),_._uU(45,"\n              "),_.YNc(46,Un,9,6,"ng-container",9),_._uU(47,"\n              "),_.YNc(48,fn,9,6,"ng-container",9),_._uU(49,"\n            "),_.qZA(),_._uU(50,"\n            "),_.TgZ(51,"td",27),_._uU(52,"\n              "),_._UZ(53,"button",29),_.ALo(54,"i18n"),_._uU(55,"\n\n              "),_.TgZ(56,"bit-menu",null,57),_._uU(58,"\n                "),_.YNc(59,Zn,5,3,"button",33),_._uU(60,"\n                "),_.YNc(61,_n,8,3,"button",33),_._uU(62,"\n                "),_.YNc(63,bn,1,0,"bit-menu-divider",9),_._uU(64,"\n                "),_.TgZ(65,"button",31),_.NdJ("click",(function(){const t=_.CHM(e).$implicit,n=_.oxw(4);return _.KtG(n.edit(t,n.memberTab.Role))})),_._uU(66,"\n                  "),_._UZ(67,"i",58),_._uU(68),_.ALo(69,"i18n"),_.qZA(),_._uU(70,"\n                "),_.YNc(71,wn,5,3,"button",33),_._uU(72,"\n                "),_.TgZ(73,"button",31),_.NdJ("click",(function(){const t=_.CHM(e).$implicit,n=_.oxw(4);return _.KtG(n.edit(t,n.memberTab.Collections))})),_._uU(74,"\n                  "),_._UZ(75,"i",59),_._uU(76),_.ALo(77,"i18n"),_.qZA(),_._uU(78,"\n                "),_._UZ(79,"bit-menu-divider"),_._uU(80,"\n                "),_.YNc(81,vn,5,3,"button",33),_._uU(82,"\n                "),_.YNc(83,An,5,3,"button",33),_._uU(84,"\n                "),_.YNc(85,xn,5,3,"button",33),_._uU(86,"\n                "),_.YNc(87,yn,5,3,"button",33),_._uU(88,"\n                "),_.TgZ(89,"button",31),_.NdJ("click",(function(){const t=_.CHM(e).$implicit,n=_.oxw(4);return _.KtG(n.remove(t))})),_._uU(90,"\n                  "),_.TgZ(91,"span",36),_._uU(92,"\n                    "),_._UZ(93,"i",37),_._uU(94),_.ALo(95,"i18n"),_.qZA(),_._uU(96,"\n                "),_.qZA(),_._uU(97,"\n              "),_.qZA(),_._uU(98,"\n            "),_.qZA(),_._uU(99,"\n          "),_.qZA()}if(2&e){const e=t.$implicit,n=_.MAs(57),i=_.oxw(4);let o;_.xp6(4),_.Q6J("ngModel",e.checked),_.xp6(7),_.Q6J("text",_.lcZ(12,27,e))("id",e.userId)("color",e.avatarColor),_.xp6(8),_.hij("\n                      ",null!==(o=e.name)&&void 0!==o?o:e.email,"\n                    "),_.xp6(2),_.Q6J("ngIf",e.status===i.userStatusType.Invited),_.xp6(2),_.Q6J("ngIf",e.status===i.userStatusType.Accepted),_.xp6(2),_.Q6J("ngIf",e.status===i.userStatusType.Revoked),_.xp6(3),_.Q6J("ngIf",e.name),_.xp6(7),_.Q6J("ngIf",i.organization.useGroups||!e.accessAll),_.xp6(2),_.Q6J("ngIf",!i.organization.useGroups&&e.accessAll),_.xp6(4),_.hij("\n              ",_.lcZ(42,29,e.type),"\n            "),_.xp6(5),_.Q6J("ngIf",e.twoFactorEnabled),_.xp6(2),_.Q6J("ngIf",i.showEnrolledStatus(e)),_.xp6(5),_.s9C("appA11yTitle",_.lcZ(54,31,"options")),_.Q6J("bitMenuTriggerFor",n),_.xp6(6),_.Q6J("ngIf",e.status===i.userStatusType.Invited),_.xp6(2),_.Q6J("ngIf",e.status===i.userStatusType.Accepted),_.xp6(2),_.Q6J("ngIf",e.status===i.userStatusType.Accepted||e.status===i.userStatusType.Invited),_.xp6(5),_.hij(" ",_.lcZ(69,33,"memberRole"),"\n                "),_.xp6(3),_.Q6J("ngIf",i.organization.useGroups),_.xp6(5),_.hij(" ",_.lcZ(77,35,"collections"),"\n                "),_.xp6(5),_.Q6J("ngIf",i.organization.useEvents&&e.status===i.userStatusType.Confirmed),_.xp6(2),_.Q6J("ngIf",i.allowResetPassword(e)),_.xp6(2),_.Q6J("ngIf",e.status===i.userStatusType.Revoked),_.xp6(2),_.Q6J("ngIf",e.status!==i.userStatusType.Revoked),_.xp6(7),_.hij(" ",_.lcZ(95,37,"remove"),"\n                  ")}}function Cn(e,t){if(1&e&&(_._uU(0,"\n          "),_.YNc(1,Tn,100,39,"tr",42),_._uU(2,"\n        ")),2&e){const e=_.oxw(2).ngIf;_.xp6(1),_.Q6J("ngForOf",e)}}function qn(e,t){if(1&e){const e=_.EpF();_.ynx(0),_._uU(1,"\n      "),_.YNc(2,cn,4,6,"app-callout",21),_._uU(3,"\n      "),_.TgZ(4,"bit-table",22),_.NdJ("scrolled",(function(){_.CHM(e);const t=_.oxw(2);return _.KtG(t.loadMore())})),_._uU(5,"\n        "),_.ynx(6,23),_._uU(7,"\n          "),_.TgZ(8,"tr"),_._uU(9,"\n            "),_.TgZ(10,"th",24),_._uU(11,"\n              "),_.TgZ(12,"input",25),_.NdJ("change",(function(t){_.CHM(e);const n=_.oxw(2);return _.KtG(n.selectAll(t.target.checked))})),_.qZA(),_._uU(13,"\n              "),_.TgZ(14,"label",26),_._uU(15),_.ALo(16,"i18n"),_.qZA(),_._uU(17,"\n            "),_.qZA(),_._uU(18,"\n            "),_.TgZ(19,"th",27),_._uU(20),_.ALo(21,"i18n"),_.qZA(),_._uU(22,"\n            "),_.TgZ(23,"th",27),_._uU(24),_.ALo(25,"i18n"),_.qZA(),_._uU(26,"\n            "),_.TgZ(27,"th",27),_._uU(28),_.ALo(29,"i18n"),_.qZA(),_._uU(30,"\n            "),_.TgZ(31,"th",27),_._uU(32),_.ALo(33,"i18n"),_.qZA(),_._uU(34,"\n            "),_.TgZ(35,"th",28),_._uU(36,"\n              "),_._UZ(37,"button",29),_.ALo(38,"i18n"),_._uU(39,"\n\n              "),_.TgZ(40,"bit-menu",null,30),_._uU(42,"\n                "),_.TgZ(43,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw(2);return _.KtG(t.bulkReinvite())})),_._uU(44,"\n                  "),_._UZ(45,"i",32),_._uU(46),_.ALo(47,"i18n"),_.qZA(),_._uU(48,"\n                "),_.YNc(49,ln,8,3,"button",33),_._uU(50,"\n                "),_.TgZ(51,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw(2);return _.KtG(t.bulkRestore())})),_._uU(52,"\n                  "),_._UZ(53,"i",34),_._uU(54),_.ALo(55,"i18n"),_.qZA(),_._uU(56,"\n                "),_.TgZ(57,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw(2);return _.KtG(t.bulkRevoke())})),_._uU(58,"\n                  "),_._UZ(59,"i",35),_._uU(60),_.ALo(61,"i18n"),_.qZA(),_._uU(62,"\n                "),_.TgZ(63,"button",31),_.NdJ("click",(function(){_.CHM(e);const t=_.oxw(2);return _.KtG(t.bulkRemove())})),_._uU(64,"\n                  "),_.TgZ(65,"span",36),_._uU(66,"\n                    "),_._UZ(67,"i",37),_._uU(68),_.ALo(69,"i18n"),_.qZA(),_._uU(70,"\n                "),_.qZA(),_._uU(71,"\n              "),_.qZA(),_._uU(72,"\n            "),_.qZA(),_._uU(73,"\n          "),_.qZA(),_._uU(74,"\n        "),_.BQk(),_._uU(75,"\n        "),_.YNc(76,Cn,3,1,"ng-template",38),_._uU(77,"\n      "),_.qZA(),_._uU(78,"\n    "),_.BQk()}if(2&e){const e=_.MAs(41),t=_.oxw(2);_.xp6(2),_.Q6J("ngIf",t.showConfirmUsers),_.xp6(2),_.Q6J("infiniteScrollDistance",1)("infiniteScrollDisabled",!t.isPaging()),_.xp6(11),_.Oqu(_.lcZ(16,15,"all")),_.xp6(5),_.Oqu(_.lcZ(21,17,"name")),_.xp6(4),_.Oqu(_.lcZ(25,19,t.organization.useGroups?"groups":"collections")),_.xp6(4),_.Oqu(_.lcZ(29,21,"role")),_.xp6(4),_.Oqu(_.lcZ(33,23,"policies")),_.xp6(5),_.s9C("appA11yTitle",_.lcZ(38,25,"options")),_.Q6J("bitMenuTriggerFor",e),_.xp6(9),_.hij("\n                  ",_.lcZ(47,27,"reinviteSelected"),"\n                "),_.xp6(3),_.Q6J("ngIf",t.showBulkConfirmUsers),_.xp6(5),_.hij("\n                  ",_.lcZ(55,29,"restoreAccess"),"\n                "),_.xp6(6),_.hij("\n                  ",_.lcZ(61,31,"revokeAccess"),"\n                "),_.xp6(8),_.hij("\n                    ",_.lcZ(69,33,"remove"),"\n                  ")}}function kn(e,t){if(1&e&&(_.ynx(0),_._uU(1,"\n    "),_.YNc(2,an,3,3,"p",9),_._uU(3,"\n    "),_.YNc(4,qn,79,35,"ng-container",9),_._uU(5,"\n  "),_.BQk()),2&e){const e=t.ngIf;_.xp6(2),_.Q6J("ngIf",!e.length),_.xp6(2),_.Q6J("ngIf",e.length)}}function Sn(e,t){}function In(e,t){}function Pn(e,t){}function Mn(e,t){}function Nn(e,t){}function Ln(e,t){}function Jn(e,t){}function zn(e,t){}const On=function(e,t){return[e,t,"name","email","id"]};class Rn extends Le.b{constructor(e,t,n,i,o,r,a,c,l,u,d,m,h,U,f,Z,_,b,w,v,A,x){super(e,a,n,o,r,c,i,d,m,h,f),this.route=t,this.policyService=l,this.policyApiService=u,this.syncService=U,this.organizationService=Z,this.organizationApiService=_,this.organizationUserService=b,this.dialogService=w,this.router=v,this.groupService=A,this.collectionService=x,this.userType=g.j,this.userStatusType=p.D,this.memberTab=D,this.status=null,this.orgResetPasswordPolicyEnabled=!1,this.destroy$=new s.x}ngOnInit(){return $t(this,void 0,void 0,(function*(){const e=this.route.params.pipe((0,Ze.U)((e=>this.organizationService.get(e.organizationId))),(0,a.d)({refCount:!0,bufferSize:1})),t=e.pipe((0,c.w)((e=>e.isProviderUser?(0,_e.D)(this.policyApiService.getPolicies(e.id)).pipe((0,Ze.U)((e=>this.policyService.mapPoliciesFromToken(e)))):this.policyService.policies$)));(0,l.a)([this.route.queryParams,t,e]).pipe((0,be.b)((([e,t,n])=>$t(this,void 0,void 0,(function*(){if(this.organization=n,this.organization.canManageUsersPassword&&!this.organization.hasPublicAndPrivateKeys){const e=yield this.cryptoService.getOrgKey(this.organization.id),t=yield this.cryptoService.makeKeyPair(e),n=new Se.u(t[0],t[1].encryptedString),i=yield this.organizationApiService.updateKeys(this.organization.id,n);if(null==i)throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));this.organization.hasPublicAndPrivateKeys=null!=i.publicKey&&null!=i.privateKey,yield this.syncService.fullSync(!0)}const i=t.filter((e=>e.type===Ce.M.ResetPassword)).find((e=>e.organizationId===this.organization.id));if(this.orgResetPasswordPolicyEnabled=null==i?void 0:i.enabled,yield this.load(),this.searchText=e.search,null!=e.viewEvents){const t=this.users.filter((t=>t.id===e.viewEvents));t.length>0&&t[0].status===p.D.Confirmed&&this.events(t[0])}})))),(0,u.R)(this.destroy$)).subscribe()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}load(){const e=Object.create(null,{load:{get:()=>super.load}});return $t(this,void 0,void 0,(function*(){yield e.load.call(this)}))}getUsers(){var e;return $t(this,void 0,void 0,(function*(){let t,n;const i=this.organizationUserService.getAllUsers(this.organization.id,{includeGroups:this.organization.useGroups,includeCollections:!this.organization.useGroups});this.organization.useGroups?t=this.getGroupNameMap():n=this.getCollectionNameMap();const[o,s,r]=yield Promise.all([i,t,n]);return null===(e=o.data)||void 0===e?void 0:e.map((e=>{var t,n;const i=ze.fromResponse(e);return i.groupNames=i.groups.map((e=>s.get(e))).sort(null===(t=this.i18nService.collator)||void 0===t?void 0:t.compare),i.collectionNames=i.collections.map((e=>r.get(e.id))).sort(null===(n=this.i18nService.collator)||void 0===n?void 0:n.compare),i}))}))}getGroupNameMap(){return $t(this,void 0,void 0,(function*(){const e=yield this.groupService.getAll(this.organization.id),t=new Map;return e.forEach((e=>t.set(e.id,e.name))),t}))}getCollectionNameMap(){return $t(this,void 0,void 0,(function*(){const e=new Map,t=(yield this.apiService.getCollections(this.organization.id)).data.map((e=>new ke.F(new qe.Z(e))));return(yield this.collectionService.decryptMany(t)).forEach((t=>e.set(t.id,t.name))),e}))}deleteUser(e){return this.organizationUserService.deleteOrganizationUser(this.organization.id,e)}revokeUser(e){return this.organizationUserService.revokeOrganizationUser(this.organization.id,e)}restoreUser(e){return this.organizationUserService.restoreOrganizationUser(this.organization.id,e)}reinviteUser(e){return this.organizationUserService.postOrganizationUserReinvite(this.organization.id,e)}confirmUser(e,t){return $t(this,void 0,void 0,(function*(){const n=yield this.cryptoService.getOrgKey(this.organization.id),i=yield this.cryptoService.rsaEncrypt(n.key,t.buffer),o=new Te;o.key=i.encryptedString,yield this.organizationUserService.postOrganizationUserConfirm(this.organization.id,e.id,o)}))}allowResetPassword(e){let t=!1;switch(this.organization.type){case g.j.Owner:t=!0;break;case g.j.Admin:t=e.type!==g.j.Owner;break;case g.j.Custom:t=e.type!==g.j.Owner&&e.type!==g.j.Admin}return this.organization.canManageUsersPassword&&t&&this.organization.useResetPassword&&this.organization.hasPublicAndPrivateKeys&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled&&e.status===p.D.Confirmed}showEnrolledStatus(e){return this.organization.useResetPassword&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled}showFreeOrgUpgradeDialog(){return $t(this,void 0,void 0,(function*(){const e={title:this.i18nService.t("upgradeOrganization"),content:this.i18nService.t(this.organization.canManageBilling?"freeOrgInvLimitReachedManageBilling":"freeOrgInvLimitReachedNoManageBilling",this.organization.seats),type:Pe.r.PRIMARY};this.organization.canManageBilling?e.acceptButtonText=this.i18nService.t("upgrade"):(e.acceptButtonText=this.i18nService.t("ok"),e.cancelButtonText=null);const t=this.dialogService.openSimpleDialog(e);(0,we.z)(t.closed).then((e=>{e&&e==Me.m.ACCEPT&&this.organization.canManageBilling&&this.router.navigate(["/organizations",this.organization.id,"billing","subscription"],{queryParams:{upgrade:!0}})}))}))}edit(e,t=D.Role){return $t(this,void 0,void 0,(function*(){if(!e&&this.organization.planProductType===Ie.k.Free&&this.allUsers.length===this.organization.seats)return void(yield this.showFreeOrgUpgradeDialog());const n=(i=this.dialogService,o={data:{name:this.userNamePipe.transform(e),organizationId:this.organization.id,organizationUserId:null!=e?e.id:null,usesKeyConnector:null==e?void 0:e.usesKeyConnector,initialTab:t}},i.open(ue,o));var i,o;switch(yield(0,ve.n)(n.closed)){case $.Deleted:this.removeUser(e);break;case $.Saved:case $.Revoked:case $.Restored:this.load()}}))}bulkRemove(){return $t(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(Re.I,this.bulkRemoveModalRef,(e=>{e.organizationId=this.organization.id,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}bulkRevoke(){return $t(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!0)}))}bulkRestore(){return $t(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!1)}))}bulkRevokeOrRestore(e){return $t(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const t=this.modalService.open(tt,{allowMultipleModals:!0,data:{organizationId:this.organization.id,users:this.getCheckedUsers(),isRevoking:e}});yield t.onClosedPromise(),yield this.load()}))}bulkReinvite(){return $t(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const e=this.getCheckedUsers(),t=e.filter((e=>e.status===p.D.Invited));if(t.length<=0)this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("noSelectedUsersApplicable"));else{try{const n=this.organizationUserService.postManyOrganizationUserReinvite(this.organization.id,t.map((e=>e.id)));this.showBulkStatus(e,t,n,this.i18nService.t("bulkReinviteMessage"))}catch(n){this.validationService.showError(n)}this.actionPromise=null}}))}bulkConfirm(){return $t(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(Oe.$,this.bulkConfirmModalRef,(e=>{e.organizationId=this.organization.id,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}events(e){return $t(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(Ne.$,this.eventsModalRef,(t=>{t.name=this.userNamePipe.transform(e),t.organizationId=this.organization.id,t.entityId=e.id,t.showUser=!1,t.entity="user"}))}))}resetPassword(e){return $t(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(bt,this.resetPasswordModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.email=null!=e?e.email:null,n.organizationId=this.organization.id,n.id=null!=e?e.id:null,n.onPasswordReset.subscribe((()=>{t.close(),this.load()}))}))}))}removeUserConfirmationDialog(e){return $t(this,void 0,void 0,(function*(){const t=e.usesKeyConnector?this.i18nService.t("removeUserConfirmationKeyConnector"):this.i18nService.t("removeOrgUserConfirmation");return this.platformUtilsService.showDialog(t,this.i18nService.t("removeUserIdAccess",this.userNamePipe.transform(e)),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")}))}showBulkStatus(e,t,n,i){return $t(this,void 0,void 0,(function*(){const[o,s]=yield this.modalService.openViewRef(nt.C,this.bulkStatusModalRef,(e=>{e.loading=!0}));let r=!1;o.onShown.subscribe((()=>{r&&o.close()}));try{const r=yield n;if(o){const n=r.data.filter((e=>""!==e.error)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t.error})),{}),o=t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t})),{});s.users=e.map((e=>{var t;let s=null!==(t=n[e.id])&&void 0!==t?t:i;return o.hasOwnProperty(e.id)||(s=this.i18nService.t("bulkFilteredMessage")),{user:e,error:n.hasOwnProperty(e.id),message:s}})),s.loading=!1}}catch(a){r=!0,o.close()}}))}}Rn.ɵfac=function(e){return new(e||Rn)(_.Y36(wt.s),_.Y36(Ue.gz),_.Y36(b.D),_.Y36(ye.Z),_.Y36(w.P),_.Y36(ut.$),_.Y36(vt.o),_.Y36(At.R),_.Y36(lt.d),_.Y36(xt.P),_.Y36(dt.$),_.Y36(Ae.C),_.Y36(xe.z),_.Y36(yt._),_.Y36(Tt.b),_.Y36(d.Mn),_.Y36(Ct.M),_.Y36(v.t),_.Y36(qt.x),_.Y36(Ue.F0),_.Y36(U.lT),_.Y36(kt.a))},Rn.ɵcmp=_.Xpm({type:Rn,selectors:[["app-org-people"]],viewQuery:function(e,t){if(1&e&&(_.Gf(Ft,7,_.s_b),_.Gf(Kt,7,_.s_b),_.Gf(Ht,7,_.s_b),_.Gf(Wt,7,_.s_b),_.Gf(Vt,7,_.s_b),_.Gf(Xt,7,_.s_b),_.Gf(en,7,_.s_b)),2&e){let e;_.iGM(e=_.CRH())&&(t.groupsModalRef=e.first),_.iGM(e=_.CRH())&&(t.eventsModalRef=e.first),_.iGM(e=_.CRH())&&(t.confirmModalRef=e.first),_.iGM(e=_.CRH())&&(t.resetPasswordModalRef=e.first),_.iGM(e=_.CRH())&&(t.bulkStatusModalRef=e.first),_.iGM(e=_.CRH())&&(t.bulkConfirmModalRef=e.first),_.iGM(e=_.CRH())&&(t.bulkRemoveModalRef=e.first)}},features:[_.qOj],decls:82,vars:45,consts:[[1,"container","page-content"],[1,"tw-mb-4","tw-flex","tw-flex-col","tw-space-y-4"],[1,"tw-flex","tw-items-center","tw-justify-end","tw-space-x-3"],[3,"selected","selectedChange"],[3,"value"],["bitBadge","","badgeType","info",4,"ngIf"],[1,"tw-grow",3,"ngModel","placeholder","ngModelChange"],["type","button","bitButton","","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[4,"ngIf"],["addEdit",""],["groupsTemplate",""],["eventsTemplate",""],["confirmTemplate",""],["resetPasswordTemplate",""],["bulkStatusTemplate",""],["bulkConfirmTemplate",""],["bulkRemoveTemplate",""],["bitBadge","","badgeType","info"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["type","info","icon","bwi bwi-check-circle",3,"title",4,"ngIf"],["infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],["header",""],["bitCell","",1,"tw-w-20"],["type","checkbox","bitCheckbox","","id","selectAll",1,"tw-mr-1",3,"change"],["for","selectAll",1,"tw-mb-0","!tw-font-bold","!tw-text-muted"],["bitCell",""],["bitCell","",1,"tw-w-10"],["type","button","bitIconButton","bwi-ellipsis-v","size","small",3,"bitMenuTriggerFor","appA11yTitle"],["headerMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-envelope"],["type","button","bitMenuItem","",3,"click",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-circle"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-close"],["body",""],["type","info","icon","bwi bwi-check-circle",3,"title"],[1,"tw-text-success"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"],["bitRow","","alignContent","middle",4,"ngFor","ngForOf"],["bitRow","","alignContent","middle"],["bitCell","",3,"click"],["type","checkbox","bitCheckbox","",3,"ngModel","ngModelChange"],["bitCell","",1,"tw-cursor-pointer",3,"click"],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],["bitLink",""],["bitBadge","","class","tw-text-xs","badgeType","secondary",4,"ngIf"],["bitBadge","","class","tw-text-xs","badgeType","warning",4,"ngIf"],["class","tw-text-sm tw-text-muted",4,"ngIf"],["badgeType","secondary",3,"items","maxItems",4,"ngIf"],["bitCell","",1,"tw-cursor-pointer","tw-text-sm","tw-text-muted",3,"click"],["bitCell","",1,"tw-text-muted"],["rowMenu",""],["aria-hidden","true",1,"bwi","bwi-user"],["aria-hidden","true",1,"bwi","bwi-collection"],["bitBadge","","badgeType","secondary",1,"tw-text-xs"],["bitBadge","","badgeType","warning",1,"tw-text-xs"],[1,"tw-text-sm","tw-text-muted"],["badgeType","secondary",3,"items","maxItems"],["aria-hidden","true",1,"bwi","bwi-lock",3,"title"],[1,"tw-sr-only"],["aria-hidden","true",1,"bwi","bwi-key",3,"title"],["aria-hidden","true",1,"bwi","bwi-envelope"],["aria-hidden","true",1,"bwi","bwi-check"],["aria-hidden","true",1,"bwi","bwi-users"],["aria-hidden","true",1,"bwi","bwi-file-text"],["aria-hidden","true",1,"bwi","bwi-key"],["aria-hidden","true",1,"bwi","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-minus-circle"]],template:function(e,t){1&e&&(_._uU(0,"\n"),_._uU(1,"\n"),_.TgZ(2,"div",0),_._uU(3,"\n  "),_.TgZ(4,"div",1),_._uU(5,"\n    "),_.TgZ(6,"h1"),_._uU(7),_.ALo(8,"i18n"),_.qZA(),_._uU(9,"\n    "),_.TgZ(10,"div",2),_._uU(11,"\n      "),_.TgZ(12,"bit-toggle-group",3),_.NdJ("selectedChange",(function(e){return t.filter(e)})),_.ALo(13,"i18n"),_._uU(14,"\n        "),_.TgZ(15,"bit-toggle",4),_._uU(16),_.ALo(17,"i18n"),_.YNc(18,tn,2,1,"span",5),_._uU(19,"\n        "),_.qZA(),_._uU(20,"\n\n        "),_.TgZ(21,"bit-toggle",4),_._uU(22),_.ALo(23,"i18n"),_.YNc(24,nn,2,1,"span",5),_._uU(25,"\n        "),_.qZA(),_._uU(26,"\n\n        "),_.TgZ(27,"bit-toggle",4),_._uU(28),_.ALo(29,"i18n"),_.YNc(30,on,2,1,"span",5),_._uU(31,"\n        "),_.qZA(),_._uU(32,"\n\n        "),_.TgZ(33,"bit-toggle",4),_._uU(34),_.ALo(35,"i18n"),_.YNc(36,sn,2,1,"span",5),_._uU(37,"\n        "),_.qZA(),_._uU(38,"\n      "),_.qZA(),_._uU(39,"\n\n      "),_.TgZ(40,"app-search-input",6),_.NdJ("ngModelChange",(function(e){return t.searchText=e})),_.ALo(41,"i18n"),_._uU(42,"\n      "),_.qZA(),_._uU(43,"\n\n      "),_.TgZ(44,"button",7),_.NdJ("click",(function(){return t.invite()})),_._uU(45,"\n        "),_._UZ(46,"i",8),_._uU(47),_.ALo(48,"i18n"),_.qZA(),_._uU(49,"\n    "),_.qZA(),_._uU(50,"\n  "),_.qZA(),_._uU(51,"\n  "),_.YNc(52,rn,9,6,"ng-container",9),_._uU(53,"\n  "),_.YNc(54,kn,6,2,"ng-container",9),_.ALo(55,"search"),_._uU(56,"\n  "),_.YNc(57,Sn,0,0,"ng-template",null,10,_.W1O),_._uU(59,"\n  "),_.YNc(60,In,0,0,"ng-template",null,11,_.W1O),_._uU(62,"\n  "),_.YNc(63,Pn,0,0,"ng-template",null,12,_.W1O),_._uU(65,"\n  "),_.YNc(66,Mn,0,0,"ng-template",null,13,_.W1O),_._uU(68,"\n  "),_.YNc(69,Nn,0,0,"ng-template",null,14,_.W1O),_._uU(71,"\n  "),_.YNc(72,Ln,0,0,"ng-template",null,15,_.W1O),_._uU(74,"\n  "),_.YNc(75,Jn,0,0,"ng-template",null,16,_.W1O),_._uU(77,"\n  "),_.YNc(78,zn,0,0,"ng-template",null,17,_.W1O),_._uU(80,"\n"),_.qZA(),_._uU(81,"\n")),2&e&&(_.xp6(7),_.Oqu(_.lcZ(8,20,"members")),_.xp6(5),_.Q6J("selected",t.status),_.uIk("aria-label",_.lcZ(13,22,"memberStatusFilter")),_.xp6(3),_.Q6J("value",null),_.xp6(1),_.hij("\n          ",_.lcZ(17,24,"all")," "),_.xp6(2),_.Q6J("ngIf",t.allCount),_.xp6(3),_.Q6J("value",t.userStatusType.Invited),_.xp6(1),_.hij("\n          ",_.lcZ(23,26,"invited"),"\n          "),_.xp6(2),_.Q6J("ngIf",t.invitedCount),_.xp6(3),_.Q6J("value",t.userStatusType.Accepted),_.xp6(1),_.hij("\n          ",_.lcZ(29,28,"needsConfirmation"),"\n          "),_.xp6(2),_.Q6J("ngIf",t.acceptedCount),_.xp6(3),_.Q6J("value",t.userStatusType.Revoked),_.xp6(1),_.hij("\n          ",_.lcZ(35,30,"revoked"),"\n          "),_.xp6(2),_.Q6J("ngIf",t.revokedCount),_.xp6(4),_.Q6J("ngModel",t.searchText)("placeholder",_.lcZ(41,32,"searchMembers")),_.xp6(7),_.hij("\n        ",_.lcZ(48,34,"inviteMember"),"\n      "),_.xp6(5),_.Q6J("ngIf",t.loading),_.xp6(2),_.Q6J("ngIf",!t.loading&&(t.isPaging()?t.pagedUsers:_.G7q(55,36,_.WLB(42,On,t.users,t.searchText)))))},dependencies:[A.sg,A.O5,o.Wl,o.JJ,o.On,St.Ry,x.B,Ge.O,Qe.A,It.b,q.l,k.r,S.b,z.Q,Pt._,Mt.M,Nt.t,Lt.e,Jt.n,zt.a,Ot.Y,Rt.v,zt.f,Qt,jt,Bt,Y.C,Ae.C,xe.z,Dt.t],encapsulation:2});const Gn=[{path:"",component:Rn,canActivate:[fe.G],data:{titleId:"members",organizationPermissions:d.tt}}];class Qn{}Qn.ɵfac=function(e){return new(e||Qn)},Qn.ɵmod=_.oAB({type:Qn}),Qn.ɵinj=_.cJS({imports:[Ue.Bz.forChild(Gn),Ue.Bz]});class Yn{}Yn.ɵfac=function(e){return new(e||Yn)},Yn.ɵmod=_.oAB({type:Yn}),Yn.ɵinj=_.cJS({imports:[ge.PV,he.f,Qn,me]})}}]);
//# sourceMappingURL=983.9cd87ff866bea82e9d87.js.map